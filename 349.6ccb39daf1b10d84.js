"use strict";(self.webpackChunkMyMoney=self.webpackChunkMyMoney||[]).push([[349],{4349:(st,v,s)=>{s.r(v),s.d(v,{HomeModule:()=>it});var m=s(9808),O=s(4733),C=s(1083),p=s(8505),P=s(7272),f=s(7503),b=s(9841),g=s(8966),t=s(5e3),h=s(8762),x=s(8480),T=s(1271),d=s(7093),A=s(7423);let D=(()=>{class n{constructor(e,o,r,c,a){this.dialogRef=e,this.data=o,this.loginService=r,this.transactionService=c,this.snackBar=a,this.userCurrency=this.loginService.getSessionFromStorage(f.t)}delete(e,o){this.transactionService.deleteTransaction(e,o).subscribe({next:r=>{this.snackBar.open(r,"dismiss",{duration:3e3}),console.log("data => "+r)},error:r=>{"404"==r.status?this.snackBar.open("Transaction not found","dismiss",{duration:3e3}):"502"==r.status?this.snackBar.open("Connection timed out, Try again later","dismiss",{duration:3e3}):(this.snackBar.open(r.message,"dismiss",{duration:3e3}),console.log("error =>"+r.message))}}),this.dialogRef.close(!0)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(g.so),t.Y36(g.WI,8),t.Y36(h.r),t.Y36(x.v),t.Y36(T.ux))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-list-item-dialog"]],decls:21,vars:9,consts:[["mat-dialog-title","",1,"title"],["fxLayout","row","fxLayoutAlign"," center"],["fxFlex","10",1,"category",3,"src"],["fxFlex","50","fxLayoutAlign","center start",1,"name","font_weight_500"],["fxFlex","40","fxLayoutAlign","center end",1,"name","font_weight_500"],["mat-dialog-content",""],[1,"time"],[1,"time_title"],[1,"desc"],["mat-dialog-actions",""],["mat-button","","mat-dialog-close","","color","accent"],["mat-button","","mat-dialog-close","","color","warn",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"img",2),t.TgZ(3,"span",3),t._uU(4),t.qZA(),t.TgZ(5,"span",4),t._uU(6),t.ALo(7,"number"),t.qZA()()(),t.TgZ(8,"div",5)(9,"div",6)(10,"span",7),t._uU(11,"Time: "),t.qZA(),t.TgZ(12,"span"),t._uU(13),t.qZA()(),t.TgZ(14,"div",8),t._uU(15),t.qZA()(),t.TgZ(16,"div",9)(17,"button",10),t._uU(18,"Close"),t.qZA(),t.TgZ(19,"button",11),t.NdJ("click",function(){return o.delete(o.data.id,o.data.userId)}),t._uU(20,"Delete"),t.qZA()()),2&e&&(t.xp6(2),t.MGl("src","assets/categories/",o.data.category,".png",t.LSH),t.xp6(2),t.Oqu(o.data.category),t.xp6(2),t.AsE("(",t.xi3(7,6,o.data.amount,"1.0-3")," ",o.userCurrency,")"),t.xp6(7),t.Oqu(o.data.time),t.xp6(2),t.hij(" ",o.data.description," "))},directives:[g.uh,d.xw,d.Wh,d.yH,g.xY,g.H8,A.lW,g.ZT],pipes:[m.JJ],styles:[".category[_ngcontent-%COMP%]{margin:.5rem}.title[_ngcontent-%COMP%]{font-size:1rem}.time_title[_ngcontent-%COMP%]{font-weight:500}"]}),n})();var Z=s(6290),M=s(9224),F=s(5245),S=s(3322),y=s(4623),H=s(4834),I=s(773);let U=(()=>{class n{transform(e){let o=new Date(e),r=new Date,c=new Date((new Date).setDate((new Date).getDate()-1)),a=new Date;a.setDate(r.getDate()-r.getDay());let u=a;return u.setDate(a.getDate()-7),o.setHours(0,0,0,0)==r.setHours(0,0,0,0)?"Today":o.setHours(0,0,0,0)==c.setHours(0,0,0,0)?"Yesterday":o>a&&o<c?"This week: ":o<a&&o>u?"Last week: ":"This month: "}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=t.Yjl({name:"elapsedTime",type:n,pure:!0}),n})(),w=(()=>{class n{transform(e){return e.length>15?e.slice(0,15)+" ...":e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=t.Yjl({name:"description",type:n,pure:!0}),n})();function J(n,i){1&n&&(t.TgZ(0,"mat-icon",14),t._uU(1,"arrow_upward"),t.qZA())}function Y(n,i){1&n&&(t.TgZ(0,"mat-icon",15),t._uU(1,"arrow_downward"),t.qZA())}const E=function(n){return{color:n}};function k(n,i){if(1&n&&(t.TgZ(0,"div",5)(1,"mat-card",6)(2,"p",7),t._uU(3,"Spent this month "),t.YNc(4,J,2,0,"mat-icon",8),t.YNc(5,Y,2,0,"mat-icon",9),t.TgZ(6,"span",10),t._uU(7),t.qZA()(),t.TgZ(8,"p",11)(9,"span"),t._uU(10),t.ALo(11,"number"),t.qZA(),t.TgZ(12,"span",12),t._UZ(13,"img",13),t.qZA()()()()),2&n){const e=t.oxw();t.xp6(4),t.Q6J("ngIf",e.expense_difference>0),t.xp6(1),t.Q6J("ngIf",e.expense_difference<0),t.xp6(1),t.Q6J("ngStyle",t.VKq(10,E,e.expense_difference>0?"red":"green")),t.xp6(1),t.AsE("",e.expense_difference," ",e.userCurrency,""),t.xp6(3),t.hij("",t.xi3(11,7,e.current_expense,"1.0-3")," "),t.xp6(3),t.MGl("src","assets/flags/",e.userCurrency,".png",t.LSH)}}function Q(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"mat-list-item",22),t.NdJ("click",function(){const c=t.CHM(e).$implicit;return t.oxw(3).showDetails(c.id,c.category,c.description,c.amount,c.time)}),t._UZ(1,"img",23),t.TgZ(2,"div",24)(3,"span",25),t._uU(4),t.qZA(),t.TgZ(5,"span",26),t._uU(6),t.ALo(7,"description"),t.qZA()(),t.TgZ(8,"div",27)(9,"span",28),t._uU(10),t.ALo(11,"number"),t.qZA(),t.TgZ(12,"span",29),t._uU(13),t.qZA()()()}if(2&n){const e=i.$implicit,o=t.oxw(3);t.xp6(1),t.MGl("src","assets/categories/",e.category,".png",t.LSH),t.xp6(3),t.Oqu(e.category),t.xp6(2),t.Oqu(t.lcZ(7,6,e.description)),t.xp6(4),t.AsE("",t.xi3(11,8,e.amount,"1.0-3")," ",o.userCurrency,""),t.xp6(3),t.Oqu(e.time)}}function q(n,i){if(1&n&&(t.TgZ(0,"mat-list")(1,"div",18)(2,"span",19),t._uU(3),t.ALo(4,"elapsedTime"),t.ALo(5,"date"),t.qZA(),t.TgZ(6,"span",20),t._uU(7),t.ALo(8,"number"),t.qZA()(),t._UZ(9,"mat-divider"),t.YNc(10,Q,14,11,"mat-list-item",21),t.qZA()),2&n){const e=i.$implicit,o=t.oxw(2);t.xp6(3),t.AsE("",t.lcZ(4,5,e.date)," ",t.xi3(5,7,e.date,"mediumDate"),""),t.xp6(4),t.AsE("",t.xi3(8,10,e.total,"1.0-3")," ",o.userCurrency,""),t.xp6(3),t.Q6J("ngForOf",e.transactions)}}function B(n,i){if(1&n&&(t.TgZ(0,"div",16),t.YNc(1,q,11,13,"mat-list",17),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.dailyHistory)}}function N(n,i){1&n&&(t.TgZ(0,"div",30),t._UZ(1,"mat-spinner",31),t.qZA()),2&n&&(t.xp6(1),t.Q6J("diameter",40))}let $=(()=>{class n{constructor(e,o,r){this.transactionsService=e,this.loginService=o,this.dialog=r,this.month=((new Date).getMonth()+1).toString().length>1?((new Date).getMonth()+1).toString():"0"+((new Date).getMonth()+1).toString(),this.Lastmonth=(Number(this.month)-1).toString(),this.year=(new Date).getFullYear().toString(),this.date=this.month.toString().slice(-2)+"-"+(new Date).getFullYear().toString(),this.userId=this.loginService.getSessionFromStorage(f.E),this.userCurrency=this.loginService.getSessionFromStorage(f.t),this.transaction_monthly_data=[],this.currentExpense$=this.transactionsService.getCurrentMonthExpenseTotal(this.userId,this.year,this.month),this.lastExpense$=this.transactionsService.getCurrentMonthExpenseTotal(this.userId,this.year,this.Lastmonth),this.dailyHistory$=this.transactionsService.getDailyTransaction(this.userId,this.year,this.month),this.current_expense=0,this.last_expense=0,this.expense_difference=0,this.selectedItemIndex=0,this.isLoading=!1,this.dailyHistory=[]}ngOnInit(){this.getMonthlyExpensesData()}showDetails(e,o,r,c,a){this.dialog.open(D,{data:{id:e,userId:this.userId,category:o,description:r,amount:c,time:a}}).afterClosed().subscribe(_=>{_&&this.getMonthlyExpensesData()})}getExpencesDifference(e,o){return o-e}getMonthlyExpensesData(){this.isLoading=!0;const e=this.currentExpense$.pipe((0,p.b)(a=>{console.log("current: "+a),this.current_expense=a})),o=this.lastExpense$.pipe((0,p.b)(a=>{console.log("last:"+a),this.last_expense=a})),r=(0,b.a)([e,o]).pipe((0,p.b)(([a,u])=>{const _=this.getExpencesDifference(u,a);this.expense_difference=Math.trunc(_)})),c=this.dailyHistory$.pipe((0,p.b)(a=>{this.dailyHistory=a}));this.subscription=(0,P.z)(e,o,r,c).subscribe({complete:()=>{this.isLoading=!1}})}ngOnDestroy(){this.subscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(x.v),t.Y36(h.r),t.Y36(g.uw))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-home"]],decls:5,vars:4,consts:[[3,"title"],[1,"mobile"],["class","expense",4,"ngIf"],["class","history",4,"ngIf"],["class","spinner","fxLayoutAlign","center center",4,"ngIf"],[1,"expense"],["fxLayout","column","fxLayoutAlign","center center"],[1,"expense_title"],["style","color:red",4,"ngIf"],["style","color:green",4,"ngIf"],[3,"ngStyle"],["fxLayout","row","fxLayoutAlign","center center",1,"expense_value"],[1,"expense_flag"],[3,"src"],[2,"color","red"],[2,"color","green"],[1,"history"],[4,"ngFor","ngForOf"],["mat-subheader",""],["fxFlex","50","fxLayoutAlign","start",1,"date"],["fxFlex","50","fxLayoutAlign","end",1,"daily_total"],["class","list_item",3,"click",4,"ngFor","ngForOf"],[1,"list_item",3,"click"],["fxFlex","10",1,"category",3,"src"],["fxLayout","column","fxFlex","45","fxLayoutAlign","center start",1,"description"],[1,"name","font_weight_500"],[1,"desc","color_A9A9A9"],["fxLayout","column","fxFlex","45","fxLayoutAlign","center end",1,"value"],[1,"amount","font_weight_500"],[1,"hour","color_A9A9A9"],["fxLayoutAlign","center center",1,"spinner"],[3,"diameter"]],template:function(e,o){1&e&&(t._UZ(0,"app-header",0),t.TgZ(1,"div",1),t.YNc(2,k,14,12,"div",2),t.YNc(3,B,2,1,"div",3),t.YNc(4,N,2,1,"div",4),t.qZA()),2&e&&(t.Q6J("title","My Bucks"),t.xp6(2),t.Q6J("ngIf",!o.isLoading),t.xp6(1),t.Q6J("ngIf",!o.isLoading),t.xp6(1),t.Q6J("ngIf",o.isLoading))},directives:[Z.G,m.O5,M.a8,d.xw,d.Wh,F.Hw,m.PC,S.Zl,m.sg,y.i$,y.gs,d.yH,H.d,y.Tg,I.Ou],pipes:[m.JJ,U,m.uU,w],styles:[".desktop[_ngcontent-%COMP%]{height:100%}.desktop[_ngcontent-%COMP%]   .total_expense[_ngcontent-%COMP%]{background-color:red}.desktop[_ngcontent-%COMP%]   .yearly_statestic[_ngcontent-%COMP%]{background-color:#00f}.desktop[_ngcontent-%COMP%]   .daily_statestic[_ngcontent-%COMP%]{background-color:green}.mobile[_ngcontent-%COMP%]{min-width:300px;padding-bottom:5rem}.mobile[_ngcontent-%COMP%]   .expense[_ngcontent-%COMP%]{margin:1rem;min-width:20rem}.mobile[_ngcontent-%COMP%]   .expense[_ngcontent-%COMP%]   .expense_title[_ngcontent-%COMP%]{font-size:1rem}.mobile[_ngcontent-%COMP%]   .expense[_ngcontent-%COMP%]   .expense_title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{height:1rem;width:1rem;font-size:1rem}.mobile[_ngcontent-%COMP%]   .expense[_ngcontent-%COMP%]   .expense_value[_ngcontent-%COMP%]{font-weight:500;font-size:3rem}.mobile[_ngcontent-%COMP%]   .expense[_ngcontent-%COMP%]   .expense_flag[_ngcontent-%COMP%]{margin-left:1rem}.mobile[_ngcontent-%COMP%]   .history[_ngcontent-%COMP%]   .category[_ngcontent-%COMP%]{margin:.5rem}.mobile[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{margin:0;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.height_50[_ngcontent-%COMP%]{height:50%}.font_weight_500[_ngcontent-%COMP%]{font-weight:500}.color_A9A9A9[_ngcontent-%COMP%]{color:#a9a9a9}.mat-subheader[_ngcontent-%COMP%]{padding:0 1rem}mat-list-item[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}.list_item[_ngcontent-%COMP%]:active{background-color:#f2f2f2;transition:background-color}.list_item[_ngcontent-%COMP%]:hover{cursor:pointer}"]}),n})();var l=s(3075),R=s(520);let z=(()=>{class n{constructor(e){this.http=e}getCategories(){return this.http.get("https://mybucksmanager.000webhostapp.com/api/categories")}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(R.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var L=s(7322),G=s(7531),W=s(4107),j=s(508),X=s(5899);function K(n,i){if(1&n&&(t.TgZ(0,"mat-option",14),t._UZ(1,"img",15),t.TgZ(2,"span",16),t._uU(3),t.qZA()()),2&n){const e=i.$implicit;t.Q6J("value",e.id),t.xp6(1),t.MGl("src","assets/categories/",e.name,".png",t.LSH),t.xp6(2),t.Oqu(e.name)}}function V(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",17),t.NdJ("click",function(){return t.CHM(e),t.oxw().add_trans()}),t.TgZ(1,"span"),t._uU(2,"Add"),t.qZA()()}if(2&n){const e=t.oxw();t.Q6J("disabled",e.isLoading)("disabled",!e.addTransactionForm.valid)}}function tt(n,i){1&n&&t._UZ(0,"mat-progress-bar",20)}function et(n,i){if(1&n&&(t.TgZ(0,"div",18),t.YNc(1,tt,1,0,"mat-progress-bar",19),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.isLoading)}}const nt=[{path:"",component:$},{path:"add",component:(()=>{class n{constructor(e,o,r,c,a,u){this.formBuilder=e,this.categoryService=o,this.transactionService=r,this.loginService=c,this.snackBar=a,this.router=u,this.userId=this.loginService.getSessionFromStorage(f.E),this.isLoading=!1,this.categories=[],this.pipe=new m.uU("en-US")}ngOnInit(){this.initForm(),this.categoryService.getCategories().subscribe(e=>{this.categories=e})}initForm(){this.amountCtrl=this.formBuilder.control("",l.kI.required),this.descriptionCtrl=this.formBuilder.control("",l.kI.required),this.categoryCtrl=this.formBuilder.control("",l.kI.required),this.addTransactionForm=this.formBuilder.group({amount:this.amountCtrl,description:this.descriptionCtrl,category:this.categoryCtrl})}add_trans(){this.isLoading=!0;const e=this.addTransactionForm.value.amount,o=this.addTransactionForm.value.description,r=this.addTransactionForm.value.category,c=this.pipe.transform(Date.now(),"yyyy-MM-dd HH:mm:ss");this.transactionService.addTransaction(this.userId,r,e,o,c.toString()).subscribe({next:a=>{this.snackBar.open(a.message,"dismiss",{duration:3e3}),this.isLoading=!1,this.router.navigateByUrl("home")},error:a=>{"404"==a.status?this.snackBar.open("Transaction not found","dismiss",{duration:3e3}):"502"==a.status?this.snackBar.open("Connection timed out, Try again later","dismiss",{duration:3e3}):(this.snackBar.open(a.message,"dismiss",{duration:3e3}),console.log("error =>"+a.message))}})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(l.qu),t.Y36(z),t.Y36(x.v),t.Y36(h.r),t.Y36(T.ux),t.Y36(C.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-add-transactions"]],decls:22,vars:8,consts:[[3,"title"],["fxLayout","column","fxLayoutAlign","center center",1,"container"],["fxLayout","column","fxLayoutAlign","center center"],["src","assets/add_transaction.png","alt","add_transaction",1,"img_title"],[1,"title"],["fxLayout","column","fxLayoutAlign","stretch",3,"formGroup"],["appearance","outline",3,"hideRequiredMarker"],["matInput","","maxlength","256","type","number","formControlName","amount",1,"amount"],["matInput","","maxlength","256","type","","formControlName","description"],["appearance","fill",3,"hideRequiredMarker"],["formControlName","category"],[3,"value",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"disabled","click",4,"ngIf"],["class","spinner","fxLayout","column","fxLayoutAlign","center center",4,"ngIf"],[3,"value"],["fxFlex","10","alt","",1,"category_icon",3,"src"],["fxFlex",""],["mat-raised-button","","color","primary",3,"disabled","click"],["fxLayout","column","fxLayoutAlign","center center",1,"spinner"],["mode","indeterminate",4,"ngIf"],["mode","indeterminate"]],template:function(e,o){1&e&&(t._UZ(0,"app-header",0),t.TgZ(1,"div",1)(2,"mat-card",2),t._UZ(3,"img",3),t.TgZ(4,"span",4),t._uU(5,"Add Transaction"),t.qZA(),t.TgZ(6,"form",5)(7,"mat-form-field",6)(8,"mat-label"),t._uU(9,"Amount"),t.qZA(),t._UZ(10,"input",7),t.qZA(),t.TgZ(11,"mat-form-field",6)(12,"mat-label"),t._uU(13,"Description"),t.qZA(),t._UZ(14,"input",8),t.qZA(),t.TgZ(15,"mat-form-field",9)(16,"mat-label"),t._uU(17,"Category"),t.qZA(),t.TgZ(18,"mat-select",10),t.YNc(19,K,4,3,"mat-option",11),t.qZA()(),t.YNc(20,V,3,2,"button",12),t.YNc(21,et,2,1,"div",13),t.qZA()()()),2&e&&(t.Q6J("title","Add Transaction"),t.xp6(6),t.Q6J("formGroup",o.addTransactionForm),t.xp6(1),t.Q6J("hideRequiredMarker",!0),t.xp6(4),t.Q6J("hideRequiredMarker",!0),t.xp6(4),t.Q6J("hideRequiredMarker",!0),t.xp6(4),t.Q6J("ngForOf",o.categories),t.xp6(1),t.Q6J("ngIf",!o.isLoading),t.xp6(1),t.Q6J("ngIf",o.isLoading))},directives:[Z.G,d.xw,d.Wh,M.a8,l._Y,l.JL,l.sg,L.KE,L.hX,G.Nt,l.wV,l.Fj,l.nD,l.JJ,l.u,W.gD,m.sg,j.ey,d.yH,m.O5,A.lW,X.pW],styles:[".container[_ngcontent-%COMP%]{min-height:90%}.category_icon[_ngcontent-%COMP%]{max-width:20%!important}.title[_ngcontent-%COMP%]{font-weight:500;font-size:1rem;margin-bottom:1rem}"]}),n})()}];let ot=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[C.Bz.forChild(nt)]]}),n})(),it=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[m.ez,ot,O.m]]}),n})()}}]);