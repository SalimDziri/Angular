"use strict";(self.webpackChunkMyMoney=self.webpackChunkMyMoney||[]).push([[357],{7357:(L,l,i)=>{i.r(l),i.d(l,{DashboardModule:()=>N});var h=i(9808),d=i(4733),u=i(1083),c=i(7503),t=i(5e3),m=i(8480),p=i(8762),g=i(1271),x=i(6290),n=i(7093),f=i(2115),y=i(773),b=i(7423);function v(s,e){if(1&s){const a=t.EpF();t.TgZ(0,"div",4)(1,"div",5)(2,"div",6),t.NdJ("click",function(){return t.CHM(a),t.oxw().switchYear("-")}),t._UZ(3,"img",7),t.qZA(),t.TgZ(4,"div",8),t._uU(5),t.qZA(),t.TgZ(6,"div",6),t.NdJ("click",function(){return t.CHM(a),t.oxw().switchYear("+")}),t._UZ(7,"img",9),t.qZA()(),t.TgZ(8,"div",10),t._UZ(9,"apx-chart",11),t.qZA()()}if(2&s){const a=t.oxw();t.xp6(5),t.hij(" ",a.year," "),t.xp6(4),t.Q6J("series",a.chartOptions.series)("chart",a.chartOptions.chart)("dataLabels",a.chartOptions.dataLabels)("plotOptions",a.chartOptions.plotOptions)("yaxis",a.chartOptions.yaxis)("xaxis",a.chartOptions.xaxis)("fill",a.chartOptions.fill)}}function D(s,e){1&s&&(t.TgZ(0,"div",12),t._UZ(1,"mat-spinner",13),t.qZA()),2&s&&(t.xp6(1),t.Q6J("diameter",40))}function F(s,e){1&s&&(t.TgZ(0,"div",14)(1,"button",15),t._uU(2,"Retry"),t.qZA()()),2&s&&(t.xp6(1),t.Q6J("color","primary"))}const C=[{path:"",component:(()=>{class s{constructor(a,o,r){this.transactionService=a,this.loginService=o,this.snackBar=r,this.data=[],this.monthlyHistory=[],this.userId=this.loginService.getSessionFromStorage(c.E),this.userCurrency=this.loginService.getSessionFromStorage(c.t),this.date=new Date,this.year=this.date.getFullYear().toString(),this.isLoading=!1,this.retry=!1}ngOnInit(){this.initData()}ngOnDestroy(){this.subscription.unsubscribe()}initData(){this.isLoading=!0,this.subscription=this.transactionService.getYeearlyExpenses(this.year,this.userId).subscribe({next:a=>{this.data=a,this.isLoading=!1,this.initChart()},error:a=>{this.isLoading=!1,this.retry=!0,"404"==a.status?this.snackBar.open("Transaction not found","dismiss",{duration:3e3}):"502"==a.status?this.snackBar.open("Connection timed out, Try again later","dismiss",{duration:3e3}):(this.snackBar.open(a.message,"dismiss",{duration:3e3}),console.log("error =>"+a.message))}})}switchYear(a){"+"==a?(this.year=(Number(this.year)+1).toString(),this.initData()):"-"==a&&(this.year=(Number(this.year)-1).toString(),this.initData())}initChart(){this.chartOptions={series:[{name:"expenses",data:[Number(this.data[0].total.toFixed(3)),Number(this.data[1].total.toFixed(3)),Number(this.data[2].total.toFixed(3)),Number(this.data[3].total.toFixed(3)),Number(this.data[4].total.toFixed(3)),Number(this.data[5].total.toFixed(3)),Number(this.data[6].total.toFixed(3)),Number(this.data[7].total.toFixed(3)),Number(this.data[8].total.toFixed(3)),Number(this.data[9].total.toFixed(3)),Number(this.data[10].total.toFixed(3)),Number(this.data[11].total.toFixed(3))]}],chart:{height:250,type:"bar",toolbar:{tools:{download:!1}}},plotOptions:{bar:{dataLabels:{position:"top"}}},dataLabels:{enabled:!0,offsetY:-20,style:{fontSize:"12px",colors:["#304758"]}},xaxis:{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],position:"bottom",axisBorder:{show:!1},axisTicks:{show:!1},crosshairs:{fill:{type:"gradient",gradient:{colorFrom:"#D8E3F0",colorTo:"#BED1E6",stops:[0,100],opacityFrom:.4,opacityTo:.5}}}},fill:{type:"gradient"},yaxis:{axisBorder:{show:!1},axisTicks:{show:!1},labels:{show:!1}}}}}return s.\u0275fac=function(a){return new(a||s)(t.Y36(m.v),t.Y36(p.r),t.Y36(g.ux))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-dashboard"]],decls:4,vars:4,consts:[[3,"title"],["class","container","fxLayout","column",4,"ngIf"],["class","spinner min_height_90","fxLayoutAlign","center center",4,"ngIf"],["class","retry min_height_90","fxLayoutAlign","center center",4,"ngIf"],["fxLayout","column",1,"container"],["fxLayout","row",1,"year"],["fxFlex","",1,"arrow",3,"click"],["src","assets/last_year.png","alt","next_year"],["fxFlex","80","fxLayoutAlign","center center",1,"year"],["src","assets/next_year.png","alt","last_year"],[1,"chart"],[3,"series","chart","dataLabels","plotOptions","yaxis","xaxis","fill"],["fxLayoutAlign","center center",1,"spinner","min_height_90"],[3,"diameter"],["fxLayoutAlign","center center",1,"retry","min_height_90"],["mat-flat-button","",3,"color"]],template:function(a,o){1&a&&(t._UZ(0,"app-header",0),t.YNc(1,v,10,8,"div",1),t.YNc(2,D,2,1,"div",2),t.YNc(3,F,3,1,"div",3)),2&a&&(t.Q6J("title","Dashboard"),t.xp6(1),t.Q6J("ngIf",!o.isLoading&&!o.retry),t.xp6(1),t.Q6J("ngIf",o.isLoading),t.xp6(1),t.Q6J("ngIf",o.retry))},directives:[x.G,h.O5,n.xw,n.yH,n.Wh,f.x,y.Ou,b.lW],styles:["[_nghost-%COMP%]{min-height:90%}.arrow[_ngcontent-%COMP%]:hover{cursor:pointer}.year[_ngcontent-%COMP%]{font-weight:500;font-size:2rem}.min_height_90[_ngcontent-%COMP%]{min-height:90%}"]}),s})()}];let O=(()=>{class s{}return s.\u0275fac=function(a){return new(a||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[[u.Bz.forChild(C)]]}),s})(),N=(()=>{class s{}return s.\u0275fac=function(a){return new(a||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[[h.ez,O,d.m]]}),s})()}}]);