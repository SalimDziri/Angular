"use strict";(self.webpackChunkMyMoney=self.webpackChunkMyMoney||[]).push([[506],{9506:(D,m,a)=>{a.r(m),a.d(m,{SignUpModule:()=>z});var l=a(9808),p=a(1592),u=a(1083),n=a(3075),g=a(7503),t=a(5e3),h=a(5219),f=a(7319),x=a(8762),v=a(1271),U=a(5150),c=a(7093),Z=a(9224),d=a(7322),A=a(7531),C=a(4107),_=a(508),T=a(7423),y=a(5899),I=a(773);function S(r,i){if(1&r&&(t.TgZ(0,"mat-option",21),t._UZ(1,"img",22),t.TgZ(2,"span",23),t._uU(3),t.qZA()()),2&r){const e=i.$implicit;t.Q6J("value",e.id),t.xp6(1),t.MGl("src","assets/flags/",e.name,".png",t.LSH),t.xp6(2),t.hij(" ",e.name,"")}}function q(r,i){if(1&r&&(t.TgZ(0,"mat-option",24),t._UZ(1,"img",22),t.TgZ(2,"span",23),t._uU(3),t.qZA()()),2&r){const e=i.$implicit;t.Q6J("value",e.id),t.xp6(1),t.MGl("src","assets/avatars/",e.name,".png",t.LSH),t.xp6(2),t.hij(" ",e.name,"")}}function M(r,i){1&r&&(t.TgZ(0,"span",25),t._uU(1,"Invalid Email"),t.qZA())}function J(r,i){1&r&&(t.TgZ(0,"span",25),t._uU(1,"Email already exists"),t.qZA())}function L(r,i){1&r&&(t.TgZ(0,"span",25),t._uU(1,"Both Email and Phone number already exist"),t.qZA())}function P(r,i){1&r&&(t.TgZ(0,"span",25),t._uU(1,"Invalid Phone"),t.qZA())}function E(r,i){1&r&&(t.TgZ(0,"span",25),t._uU(1,"Phone number already exists"),t.qZA())}function b(r,i){1&r&&(t.TgZ(0,"span",25),t._uU(1,"Both Email and Phone number already exist"),t.qZA())}function F(r,i){1&r&&(t.TgZ(0,"small",25),t._uU(1,"Minimum eight characters, at least one uppercase letter, one lowercase letter and one number"),t.qZA())}function B(r,i){1&r&&(t.TgZ(0,"span",25),t._uU(1,"Password does not match"),t.qZA())}function Q(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"button",26),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).signup()}),t.TgZ(1,"span"),t._uU(2,"Sign Up"),t.qZA()()}if(2&r){const e=t.oxw(2);t.Q6J("disabled",e.isAddingUser)("disabled",!e.createAccountForm.valid)}}function k(r,i){1&r&&(t.TgZ(0,"div",27),t._UZ(1,"mat-progress-bar",28),t.qZA())}function N(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"mat-card",3)(1,"span",4),t._uU(2,"Sign Up"),t.qZA(),t.TgZ(3,"form",5)(4,"mat-form-field",6)(5,"mat-label"),t._uU(6,"Username"),t.qZA(),t._UZ(7,"input",7),t.qZA(),t.TgZ(8,"mat-form-field",8)(9,"mat-label"),t._uU(10,"Currency"),t.qZA(),t.TgZ(11,"mat-select",9),t.YNc(12,S,4,3,"mat-option",10),t.qZA()(),t.TgZ(13,"mat-form-field",8)(14,"mat-label"),t._uU(15,"Avatar"),t.qZA(),t.TgZ(16,"mat-select",11),t.YNc(17,q,4,3,"mat-option",12),t.qZA()(),t.TgZ(18,"mat-form-field",6)(19,"mat-label"),t._uU(20,"Email"),t.qZA(),t._UZ(21,"input",13),t.qZA(),t.YNc(22,M,2,0,"span",14),t.YNc(23,J,2,0,"span",14),t.YNc(24,L,2,0,"span",14),t.TgZ(25,"mat-form-field",6)(26,"mat-label"),t._uU(27,"Phone"),t.qZA(),t._UZ(28,"input",15),t.qZA(),t.YNc(29,P,2,0,"span",14),t.YNc(30,E,2,0,"span",14),t.YNc(31,b,2,0,"span",14),t.TgZ(32,"mat-form-field",6)(33,"mat-label"),t._uU(34,"Password"),t.qZA(),t._UZ(35,"input",16),t.qZA(),t.YNc(36,F,2,0,"small",14),t.YNc(37,B,2,0,"span",14),t.TgZ(38,"mat-form-field",6)(39,"mat-label"),t._uU(40,"Confirm Password"),t.qZA(),t._UZ(41,"input",17),t.qZA(),t.YNc(42,Q,3,2,"button",18),t.YNc(43,k,2,0,"div",2),t.qZA(),t.TgZ(44,"div",19),t._uU(45," already have an account? "),t.TgZ(46,"span",20),t.NdJ("click",function(){return t.CHM(e),t.oxw().LoginInstead()}),t._uU(47,"Login"),t.qZA()()()}if(2&r){const e=t.oxw();t.xp6(3),t.Q6J("formGroup",e.createAccountForm),t.xp6(1),t.Q6J("hideRequiredMarker",!0),t.xp6(4),t.Q6J("hideRequiredMarker",!0),t.xp6(4),t.Q6J("ngForOf",e.currencies),t.xp6(1),t.Q6J("hideRequiredMarker",!0),t.xp6(4),t.Q6J("ngForOf",e.avatars),t.xp6(1),t.Q6J("hideRequiredMarker",!0),t.xp6(4),t.Q6J("ngIf","Invalid Email"==e.errorTxt),t.xp6(1),t.Q6J("ngIf","Email already exists"==e.errorTxt),t.xp6(1),t.Q6J("ngIf","Both Email and Phone number already exist"==e.errorTxt),t.xp6(1),t.Q6J("hideRequiredMarker",!0),t.xp6(4),t.Q6J("ngIf","Invalid Phone"==e.errorTxt),t.xp6(1),t.Q6J("ngIf","Phone number already exists"==e.errorTxt),t.xp6(1),t.Q6J("ngIf","Both Email and Phone number already exist"==e.errorTxt),t.xp6(1),t.Q6J("hideRequiredMarker",!0),t.xp6(4),t.Q6J("ngIf","Invalid Password"==e.errorTxt),t.xp6(1),t.Q6J("ngIf","Password does not match"==e.errorTxt),t.xp6(1),t.Q6J("hideRequiredMarker",!0),t.xp6(4),t.Q6J("ngIf",!e.isAddingUser),t.xp6(1),t.Q6J("ngIf",e.isAddingUser)}}function Y(r,i){1&r&&(t.TgZ(0,"div",27),t._UZ(1,"mat-progress-spinner",29),t.qZA()),2&r&&(t.xp6(1),t.Q6J("diameter",70))}const O=[{path:"",component:(()=>{class r{constructor(e,s,o,w,$,j,H){this.formBuilder=e,this.router=s,this.currencyService=o,this.avatarService=w,this.loginService=$,this.snackBar=j,this.signupService=H,this.userId=this.loginService.getSessionFromStorage(g.E1),this.isLoading=!0,this.isLoadingAvatar=!1,this.isLoadingCurrency=!1,this.isAddingUser=!1,this.currencies=[],this.avatars=[]}ngOnInit(){this.initForm(),this.getData()}getData(){this.isLoading=!0,this.isLoadingAvatar=!0,this.isLoadingCurrency=!0,this.catSub=this.currencyService.getCurrencies().subscribe(e=>{this.currencies=e,this.isLoadingCurrency=!1,0==this.isLoadingAvatar&&(this.isLoading=!1)}),this.avatarSub=this.avatarService.getAvatars().subscribe(e=>{this.avatars=e,this.isLoadingAvatar=!1,0==this.isLoadingCurrency&&(this.isLoading=!1)})}initForm(){this.usernameCtrl=this.formBuilder.control("",n.kI.required),this.emailCtrl=this.formBuilder.control("",n.kI.required),this.phoneCtrl=this.formBuilder.control("",n.kI.required),this.currencyCtrl=this.formBuilder.control("",n.kI.required),this.avatarCtrl=this.formBuilder.control("",n.kI.required),this.passCtrl=this.formBuilder.control("",n.kI.required),this.confPassCtrl=this.formBuilder.control("",n.kI.required),this.createAccountForm=this.formBuilder.group({username:this.usernameCtrl,phone:this.phoneCtrl,email:this.emailCtrl,currency:this.currencyCtrl,avatar:this.avatarCtrl,pass:this.passCtrl,confpass:this.confPassCtrl})}signup(){return this.errorTxt="",/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,12}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,5}[a-zA-Z0-9])?)*$/gi.test(this.createAccountForm.value.email)?/^[\+]?[(]?[0-9]{2,5}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{3}$/gim.test(this.createAccountForm.value.phone)?this.createAccountForm.value.pass!==this.createAccountForm.value.confpass?(this.passCtrl.setErrors(n.kI.required),this.confPassCtrl.setErrors(n.kI.required),void(this.errorTxt="Password does not match")):/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{8,}$/.test(this.createAccountForm.value.pass)?void this.newAccount():(this.passCtrl.setErrors(n.kI.required),void(this.errorTxt="Invalid Password")):(this.phoneCtrl.setErrors(n.kI.required),void(this.errorTxt="Invalid Phone")):(this.emailCtrl.setErrors(n.kI.required),void(this.errorTxt="Invalid Email"))}newAccount(){this.isAddingUser=!0,this.signupSub=this.signupService.signUp(this.createAccountForm).subscribe({next:e=>{"Email already exists"==e.message?(this.isAddingUser=!1,this.errorTxt="Email already exists",this.emailCtrl.setErrors(n.kI.required)):"Phone number already exists"==e.message?(this.isAddingUser=!1,this.errorTxt="Phone number already exists",this.phoneCtrl.setErrors(n.kI.required)):"Both Email and Phone number already exist"==e.message?(this.isAddingUser=!1,this.errorTxt="Both Email and Phone number already exist",this.emailCtrl.setErrors(n.kI.required),this.phoneCtrl.setErrors(n.kI.required)):"User created successfully"==e.message?(this.isAddingUser=!1,this.errorTxt="",this.router.navigateByUrl("login"),this.snackBar.open("User created successfully","dismiss",{duration:3e3})):(this.isAddingUser=!1,this.errorTxt="",this.snackBar.open("Unkown Operation","dismiss",{duration:3e3}))},error:e=>{this.isAddingUser=!1,"404"==e.status?this.snackBar.open("Transaction not found","dismiss",{duration:3e3}):"502"==e.status?this.snackBar.open("Connection timed out, Try again later","dismiss",{duration:3e3}):(this.snackBar.open(e.error.message,"dismiss",{duration:3e3}),console.log("error =>"+e.error.message))}})}LoginInstead(){this.router.navigateByUrl("login")}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(n.qu),t.Y36(u.F0),t.Y36(h.i),t.Y36(f.o),t.Y36(x.r),t.Y36(v.ux),t.Y36(U.v))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-sign-up"]],decls:3,vars:2,consts:[["fxLayout","column","fxLayoutAlign","center center",1,"container"],["fxLayout","column","fxLayoutAlign","center center",4,"ngIf"],["class","spinner","fxLayout","column","fxLayoutAlign","center center",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center"],[1,"title"],["fxLayout","column","fxLayoutAlign","stretch",3,"formGroup"],["appearance","outline",3,"hideRequiredMarker"],["matInput","","maxlength","256","formControlName","username",1,"username"],["appearance","fill",3,"hideRequiredMarker"],["formControlName","currency"],[3,"value",4,"ngFor","ngForOf"],["formControlName","avatar"],["class","avatar-list",3,"value",4,"ngFor","ngForOf"],["matInput","","maxlength","256","formControlName","email",1,"emaail"],["class","error",4,"ngIf"],["matInput","","maxlength","256","type","number","formControlName","phone",1,"phone"],["matInput","","maxlength","256","type","password","formControlName","pass",1,"password"],["matInput","","maxlength","256","type","password","formControlName","confpass",1,"password"],["mat-raised-button","","color","primary",3,"disabled","click",4,"ngIf"],[1,"have_an_account"],[1,"login",3,"click"],[3,"value"],["fxFlex","10","alt","",1,"icon",3,"src"],["fxFlex",""],[1,"avatar-list",3,"value"],[1,"error"],["mat-raised-button","","color","primary",3,"disabled","click"],["fxLayout","column","fxLayoutAlign","center center",1,"spinner"],["mode","indeterminate"],["mode","indeterminate",3,"diameter"]],template:function(e,s){1&e&&(t.TgZ(0,"div",0),t.YNc(1,N,48,20,"mat-card",1),t.YNc(2,Y,2,1,"div",2),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",!s.isLoading),t.xp6(1),t.Q6J("ngIf",s.isLoading))},directives:[c.xw,c.Wh,l.O5,Z.a8,n._Y,n.JL,n.sg,d.KE,d.hX,A.Nt,n.Fj,n.nD,n.JJ,n.u,C.gD,l.sg,_.ey,c.yH,n.wV,T.lW,y.pW,I.Ou],styles:[".container[_ngcontent-%COMP%]{min-height:100%;background-color:#f0f2f5}.icon[_ngcontent-%COMP%]{max-width:20%!important;max-height:20%!important}.title[_ngcontent-%COMP%]{font-weight:500;font-size:1rem;margin-bottom:1rem}.error[_ngcontent-%COMP%]{color:red;font-size:1rem;font-weight:500;margin-left:.5rem;margin-bottom:5px}.pass-error[_ngcontent-%COMP%]{color:red;font-size:.5rem;font-weight:500;margin-left:.5rem;margin-bottom:5px}.have_an_account[_ngcontent-%COMP%]{margin-top:10px}.login[_ngcontent-%COMP%]{font-weight:500;color:#00f}.login[_ngcontent-%COMP%]:hover{cursor:pointer;text-decoration:underline}"]}),r})(),pathMatch:"full"}];let R=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[[u.Bz.forChild(O)]]}),r})(),z=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[[l.ez,R,p.m]]}),r})()}}]);