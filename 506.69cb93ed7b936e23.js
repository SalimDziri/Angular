"use strict";(self.webpackChunkMyMoney=self.webpackChunkMyMoney||[]).push([[506],{9506:(D,m,n)=>{n.r(m),n.d(m,{SignUpModule:()=>V});var l=n(9808),p=n(2324),u=n(1083),i=n(3075),g=n(7503),e=n(5e3),f=n(5219),h=n(7319),v=n(8762),x=n(1271),A=n(5150),Z=n(6721),c=n(7093),_=n(9224),d=n(7322),U=n(7531),C=n(4107),T=n(508),y=n(7423),S=n(5899);function I(r,a){if(1&r&&(e.TgZ(0,"mat-option",21),e._UZ(1,"img",22),e.TgZ(2,"span",23),e._uU(3),e.qZA()()),2&r){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.MGl("src","assets/flags/",t.name,".png",e.LSH),e.xp6(2),e.hij(" ",t.name,"")}}function F(r,a){if(1&r&&(e.TgZ(0,"mat-option",24),e._UZ(1,"img",22),e.TgZ(2,"span",23),e._uU(3),e.qZA()()),2&r){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.MGl("src","assets/avatars/",t.name,".png",e.LSH),e.xp6(2),e.hij(" ",t.name,"")}}function M(r,a){1&r&&(e.TgZ(0,"span",25),e._uU(1,"Invalid Email"),e.qZA())}function L(r,a){1&r&&(e.TgZ(0,"span",25),e._uU(1,"Email is used"),e.qZA())}function q(r,a){1&r&&(e.TgZ(0,"span",25),e._uU(1,"Invalid Phone"),e.qZA())}function J(r,a){1&r&&(e.TgZ(0,"span",25),e._uU(1,"Phone is used"),e.qZA())}function P(r,a){1&r&&(e.TgZ(0,"small",25),e._uU(1,"Minimum eight characters, at least one uppercase letter, one lowercase letter and one number"),e.qZA())}function b(r,a){1&r&&(e.TgZ(0,"span",25),e._uU(1,"Password does not match"),e.qZA())}function E(r,a){if(1&r){const t=e.EpF();e.TgZ(0,"button",26),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).signup()}),e.TgZ(1,"span"),e._uU(2,"Sign Up"),e.qZA()()}if(2&r){const t=e.oxw(2);e.Q6J("disabled",t.isAddingUser)("disabled",!t.createAccountForm.valid)}}function Q(r,a){1&r&&e._UZ(0,"mat-progress-bar",29)}function k(r,a){if(1&r&&(e.TgZ(0,"div",27),e.YNc(1,Q,1,0,"mat-progress-bar",28),e.qZA()),2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.isAddingUser)}}function N(r,a){if(1&r){const t=e.EpF();e.TgZ(0,"mat-card",3)(1,"span",4),e._uU(2,"Sign Up"),e.qZA(),e.TgZ(3,"form",5)(4,"mat-form-field",6)(5,"mat-label"),e._uU(6,"Username"),e.qZA(),e._UZ(7,"input",7),e.qZA(),e.TgZ(8,"mat-form-field",8)(9,"mat-label"),e._uU(10,"Currency"),e.qZA(),e.TgZ(11,"mat-select",9),e.YNc(12,I,4,3,"mat-option",10),e.qZA()(),e.TgZ(13,"mat-form-field",8)(14,"mat-label"),e._uU(15,"Avatar"),e.qZA(),e.TgZ(16,"mat-select",11),e.YNc(17,F,4,3,"mat-option",12),e.qZA()(),e.TgZ(18,"mat-form-field",6)(19,"mat-label"),e._uU(20,"Email"),e.qZA(),e._UZ(21,"input",13),e.qZA(),e.YNc(22,M,2,0,"span",14),e.YNc(23,L,2,0,"span",14),e.TgZ(24,"mat-form-field",6)(25,"mat-label"),e._uU(26,"Phone"),e.qZA(),e._UZ(27,"input",15),e.qZA(),e.YNc(28,q,2,0,"span",14),e.YNc(29,J,2,0,"span",14),e.TgZ(30,"mat-form-field",6)(31,"mat-label"),e._uU(32,"Password"),e.qZA(),e._UZ(33,"input",16),e.qZA(),e.YNc(34,P,2,0,"small",14),e.YNc(35,b,2,0,"span",14),e.TgZ(36,"mat-form-field",6)(37,"mat-label"),e._uU(38,"Confirm Password"),e.qZA(),e._UZ(39,"input",17),e.qZA(),e.YNc(40,E,3,2,"button",18),e.YNc(41,k,2,1,"div",2),e.qZA(),e.TgZ(42,"div",19),e._uU(43," already have an account? "),e.TgZ(44,"span",20),e.NdJ("click",function(){return e.CHM(t),e.oxw().LoginInstead()}),e._uU(45,"Login"),e.qZA()()()}if(2&r){const t=e.oxw();e.xp6(3),e.Q6J("formGroup",t.createAccountForm),e.xp6(1),e.Q6J("hideRequiredMarker",!0),e.xp6(4),e.Q6J("hideRequiredMarker",!0),e.xp6(4),e.Q6J("ngForOf",t.currencies),e.xp6(1),e.Q6J("hideRequiredMarker",!0),e.xp6(4),e.Q6J("ngForOf",t.avatars),e.xp6(1),e.Q6J("hideRequiredMarker",!0),e.xp6(4),e.Q6J("ngIf","Invalid Email"==t.errorTxt),e.xp6(1),e.Q6J("ngIf","Email is used"==t.errorTxt),e.xp6(1),e.Q6J("hideRequiredMarker",!0),e.xp6(4),e.Q6J("ngIf","Invalid Phone"==t.errorTxt),e.xp6(1),e.Q6J("ngIf","Phone is used"==t.errorTxt),e.xp6(1),e.Q6J("hideRequiredMarker",!0),e.xp6(4),e.Q6J("ngIf","Invalid Password"==t.errorTxt),e.xp6(1),e.Q6J("ngIf","Password does not match"==t.errorTxt),e.xp6(1),e.Q6J("hideRequiredMarker",!0),e.xp6(4),e.Q6J("ngIf",!t.isAddingUser),e.xp6(1),e.Q6J("ngIf",t.isAddingUser)}}function Y(r,a){1&r&&e._UZ(0,"mat-progress-bar",29)}function B(r,a){if(1&r&&(e.TgZ(0,"div",27),e.YNc(1,Y,1,0,"mat-progress-bar",28),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.isLoading)}}const O=[{path:"",component:(()=>{class r{constructor(t,s,o,z,w,$,j,H){this.formBuilder=t,this.router=s,this.currencyService=o,this.avatarService=z,this.loginService=w,this.snackBar=$,this.signupService=j,this.userService=H,this.userId=this.loginService.getSessionFromStorage(g.E),this.isLoading=!1,this.isLoadingAvatar=!1,this.isLoadingCurrency=!1,this.isAddingUser=!1,this.currencies=[],this.avatars=[],this.emailVerified=!1,this.phoneVerified=!1,this.passVerified=!1}ngOnInit(){this.initForm(),this.getData()}getData(){this.isLoading=!0,this.isLoadingAvatar=!0,this.isLoadingCurrency=!0,this.catSub=this.currencyService.getCurrencies().subscribe(t=>{this.currencies=t,this.isLoadingCurrency=!1,0==this.isLoadingAvatar&&(this.isLoading=!1)}),this.avatarSub=this.avatarService.getAvatars().subscribe(t=>{this.avatars=t,this.isLoadingAvatar=!1,0==this.isLoadingCurrency&&(this.isLoading=!1)})}initForm(){this.usernameCtrl=this.formBuilder.control("",i.kI.required),this.emailCtrl=this.formBuilder.control("",i.kI.required),this.phoneCtrl=this.formBuilder.control("",i.kI.required),this.currencyCtrl=this.formBuilder.control("",i.kI.required),this.avatarCtrl=this.formBuilder.control("",i.kI.required),this.passCtrl=this.formBuilder.control("",i.kI.required),this.confPassCtrl=this.formBuilder.control("",i.kI.required),this.createAccountForm=this.formBuilder.group({username:this.usernameCtrl,phone:this.phoneCtrl,email:this.emailCtrl,currency:this.currencyCtrl,avatar:this.avatarCtrl,pass:this.passCtrl,confpass:this.confPassCtrl})}signup(){return this.errorTxt="",this.isAddingUser=!0,/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,12}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,5}[a-zA-Z0-9])?)*$/gi.test(this.createAccountForm.value.email)?(this.verifyEmail(),/^[\+]?[(]?[0-9]{2,6}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{3}$/gim.test(this.createAccountForm.value.phone)?(this.verifyPhone(),this.createAccountForm.value.pass!==this.createAccountForm.value.confpass?(this.passCtrl.setErrors(i.kI.required),this.confPassCtrl.setErrors(i.kI.required),void(this.errorTxt="Password does not match")):/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{8,}$/.test(this.createAccountForm.value.pass)?(this.passVerified=!0,void(this.emailVerified&&this.phoneVerified&&this.passVerified&&this.newAccount())):(this.passCtrl.setErrors(i.kI.required),void(this.errorTxt="Invalid Password"))):(this.phoneCtrl.setErrors(i.kI.required),void(this.errorTxt="Invalid Phone"))):(this.emailCtrl.setErrors(i.kI.required),void(this.errorTxt="Invalid Email"))}verifyEmail(){this.isAddingUser=!0,this.emailVerifSub=this.userService.checkForEmail(this.createAccountForm.value.email).subscribe({next:t=>{if(this.isAddingUser=!1,"Email already in use"==t.message)return this.emailCtrl.setErrors(i.kI.required),this.errorTxt="Email is used",void(this.emailVerified=!1);this.emailVerified=!0},error:t=>{this.isAddingUser=!1,this.emailVerified=!1,"404"==t.status?this.snackBar.open("Operation not found","dismiss",{duration:3e3}):"502"==t.status?this.snackBar.open("Connection timed out, Try again later","dismiss",{duration:3e3}):(this.snackBar.open(t.error.message,"dismiss",{duration:3e3}),console.log("error =>"+t.error.message))}})}verifyPhone(){this.isAddingUser=!0,this.phoneVerifSub=this.userService.checkForPhone(this.createAccountForm.value.phone).subscribe({next:t=>{if(this.isAddingUser=!1,"Phone number already in use"==t.message)return this.phoneCtrl.setErrors(i.kI.required),this.errorTxt="Phone is used",void(this.phoneVerified=!1);this.phoneVerified=!0},error:t=>{this.isAddingUser=!1,"404"==t.status?this.snackBar.open("Operation not found","dismiss",{duration:3e3}):"502"==t.status?this.snackBar.open("Connection timed out, Try again later","dismiss",{duration:3e3}):(this.snackBar.open(t.error.message,"dismiss",{duration:3e3}),console.log("error =>"+t.error.message))}})}newAccount(){this.isAddingUser=!1,console.log("username: "+this.createAccountForm.value.username),console.log("email: "+this.createAccountForm.value.email),console.log("phone: "+this.createAccountForm.value.phone),console.log("currency: "+this.createAccountForm.value.currency),console.log("avatar: "+this.createAccountForm.value.avatar),console.log("password: "+this.createAccountForm.value.pass)}LoginInstead(){this.router.navigateByUrl("login")}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(i.qu),e.Y36(u.F0),e.Y36(f.i),e.Y36(h.o),e.Y36(v.r),e.Y36(x.ux),e.Y36(A.v),e.Y36(Z.i))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-sign-up"]],decls:3,vars:2,consts:[["fxLayout","column","fxLayoutAlign","center center",1,"container"],["fxLayout","column","fxLayoutAlign","center center",4,"ngIf"],["class","spinner","fxLayout","column","fxLayoutAlign","center center",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center"],[1,"title"],["fxLayout","column","fxLayoutAlign","stretch",3,"formGroup"],["appearance","outline",3,"hideRequiredMarker"],["matInput","","maxlength","256","formControlName","username",1,"username"],["appearance","fill",3,"hideRequiredMarker"],["formControlName","currency"],[3,"value",4,"ngFor","ngForOf"],["formControlName","avatar"],["class","avatar-list",3,"value",4,"ngFor","ngForOf"],["matInput","","maxlength","256","formControlName","email",1,"emaail"],["class","error",4,"ngIf"],["matInput","","maxlength","256","type","number","formControlName","phone",1,"phone"],["matInput","","maxlength","256","type","password","formControlName","pass",1,"password"],["matInput","","maxlength","256","type","password","formControlName","confpass",1,"password"],["mat-raised-button","","color","primary",3,"disabled","click",4,"ngIf"],[1,"have_an_account"],[1,"login",3,"click"],[3,"value"],["fxFlex","10","alt","",1,"icon",3,"src"],["fxFlex",""],[1,"avatar-list",3,"value"],[1,"error"],["mat-raised-button","","color","primary",3,"disabled","click"],["fxLayout","column","fxLayoutAlign","center center",1,"spinner"],["mode","indeterminate",4,"ngIf"],["mode","indeterminate"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0),e.YNc(1,N,46,18,"mat-card",1),e.YNc(2,B,2,1,"div",2),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",!s.isLoading),e.xp6(1),e.Q6J("ngIf",s.isLoading))},directives:[c.xw,c.Wh,l.O5,_.a8,i._Y,i.JL,i.sg,d.KE,d.hX,U.Nt,i.Fj,i.nD,i.JJ,i.u,C.gD,l.sg,T.ey,c.yH,i.wV,y.lW,S.pW],styles:[".container[_ngcontent-%COMP%]{min-height:100%;background-color:#f0f2f5}.icon[_ngcontent-%COMP%]{max-width:20%!important;max-height:20%!important}.title[_ngcontent-%COMP%]{font-weight:500;font-size:1rem;margin-bottom:1rem}.error[_ngcontent-%COMP%]{color:red;font-size:1rem;font-weight:500;margin-left:.5rem;margin-bottom:5px}.pass-error[_ngcontent-%COMP%]{color:red;font-size:.5rem;font-weight:500;margin-left:.5rem;margin-bottom:5px}.have_an_account[_ngcontent-%COMP%]{margin-top:10px}.login[_ngcontent-%COMP%]{font-weight:500;color:#00f}.login[_ngcontent-%COMP%]:hover{cursor:pointer;text-decoration:underline}"]}),r})(),pathMatch:"full"}];let R=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[u.Bz.forChild(O)]]}),r})(),V=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[l.ez,R,p.m]]}),r})()}}]);