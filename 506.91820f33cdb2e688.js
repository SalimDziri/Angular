"use strict";(self.webpackChunkMyMoney=self.webpackChunkMyMoney||[]).push([[506],{9506:(W,u,n)=>{n.r(u),n.d(u,{SignUpModule:()=>j});var o=n(9808),p=n(1592),d=n(1083),a=n(3075),g=n(7503),t=n(5e3),f=n(5219),h=n(7319),x=n(8762),v=n(1271),C=n(5150),l=n(7093),U=n(9224),c=n(7322),Z=n(7531),A=n(4107),_=n(508),y=n(2619),T=n(7423),S=n(5899),I=n(773);function M(e,i){if(1&e&&(t.TgZ(0,"mat-option",22),t._UZ(1,"img",23),t.TgZ(2,"span",24),t._uU(3),t.qZA()()),2&e){const r=i.$implicit;t.Q6J("value",r.id),t.xp6(1),t.MGl("src","assets/flags/",r.name,".png",t.LSH),t.xp6(2),t.hij(" ",r.name,"")}}function P(e,i){if(1&e&&(t.TgZ(0,"mat-option",25),t._UZ(1,"img",23),t.TgZ(2,"span",24),t._uU(3),t.qZA()()),2&e){const r=i.$implicit;t.Q6J("value",r.id),t.xp6(1),t.MGl("src","assets/avatars/",r.name,".png",t.LSH),t.xp6(2),t.hij(" ",r.name,"")}}function J(e,i){1&e&&(t.TgZ(0,"span",26),t._uU(1,"Invalid Email"),t.qZA())}function q(e,i){1&e&&(t.TgZ(0,"span",26),t._uU(1,"Email already exists"),t.qZA())}function b(e,i){1&e&&(t.TgZ(0,"span",26),t._uU(1,"Both Email and Phone number already exist"),t.qZA())}function L(e,i){1&e&&(t.TgZ(0,"span",26),t._uU(1,"Invalid Phone"),t.qZA())}function E(e,i){1&e&&(t.TgZ(0,"span",26),t._uU(1,"Phone number already exists"),t.qZA())}function Q(e,i){1&e&&(t.TgZ(0,"span",26),t._uU(1,"Both Email and Phone number already exist"),t.qZA())}function B(e,i){1&e&&(t.TgZ(0,"small",26),t._uU(1,"Minimum eight characters, at least one uppercase letter, one lowercase letter and one number"),t.qZA())}function F(e,i){1&e&&(t.TgZ(0,"span",26),t._uU(1,"Password does not match"),t.qZA())}function N(e,i){if(1&e){const r=t.EpF();t.TgZ(0,"button",27),t.NdJ("click",function(){return t.CHM(r),t.oxw(2).signup()}),t.TgZ(1,"span"),t._uU(2,"Sign Up"),t.qZA()()}if(2&e){const r=t.oxw(2);t.Q6J("disabled",r.isAddingUser)("disabled",!r.createAccountForm.valid)}}function k(e,i){1&e&&(t.TgZ(0,"div",28),t._UZ(1,"mat-progress-bar",29),t.qZA())}const Y=function(){return["us","gb"]};function O(e,i){if(1&e){const r=t.EpF();t.TgZ(0,"mat-card",3)(1,"span",4),t._uU(2,"Sign Up"),t.qZA(),t.TgZ(3,"form",5)(4,"mat-form-field",6)(5,"mat-label"),t._uU(6,"Username"),t.qZA(),t._UZ(7,"input",7),t.qZA(),t.TgZ(8,"mat-form-field",8)(9,"mat-label"),t._uU(10,"Currency"),t.qZA(),t.TgZ(11,"mat-select",9),t.YNc(12,M,4,3,"mat-option",10),t.qZA()(),t.TgZ(13,"mat-form-field",8)(14,"mat-label"),t._uU(15,"Avatar"),t.qZA(),t.TgZ(16,"mat-select",11),t.YNc(17,P,4,3,"mat-option",12),t.qZA()(),t.TgZ(18,"mat-form-field",6)(19,"mat-label"),t._uU(20,"Email"),t.qZA(),t._UZ(21,"input",13),t.qZA(),t.YNc(22,J,2,0,"span",14),t.YNc(23,q,2,0,"span",14),t.YNc(24,b,2,0,"span",14),t.TgZ(25,"mat-form-field",6),t._UZ(26,"ngx-mat-intl-tel-input",15,16),t.TgZ(28,"mat-hint"),t._uU(29),t.qZA()(),t.YNc(30,L,2,0,"span",14),t.YNc(31,E,2,0,"span",14),t.YNc(32,Q,2,0,"span",14),t.TgZ(33,"mat-form-field",6)(34,"mat-label"),t._uU(35,"Password"),t.qZA(),t._UZ(36,"input",17),t.qZA(),t.YNc(37,B,2,0,"small",14),t.YNc(38,F,2,0,"span",14),t.TgZ(39,"mat-form-field",6)(40,"mat-label"),t._uU(41,"Confirm Password"),t.qZA(),t._UZ(42,"input",18),t.qZA(),t.YNc(43,N,3,2,"button",19),t.YNc(44,k,2,0,"div",2),t.qZA(),t.TgZ(45,"div",20),t._uU(46," already have an account? "),t.TgZ(47,"span",21),t.NdJ("click",function(){return t.CHM(r),t.oxw().LoginInstead()}),t._uU(48,"Login"),t.qZA()()()}if(2&e){const r=t.MAs(27),s=t.oxw();t.xp6(3),t.Q6J("formGroup",s.createAccountForm),t.xp6(1),t.Q6J("hideRequiredMarker",!0),t.xp6(4),t.Q6J("hideRequiredMarker",!0),t.xp6(4),t.Q6J("ngForOf",s.currencies),t.xp6(1),t.Q6J("hideRequiredMarker",!0),t.xp6(4),t.Q6J("ngForOf",s.avatars),t.xp6(1),t.Q6J("hideRequiredMarker",!0),t.xp6(4),t.Q6J("ngIf","Invalid Email"==s.errorTxt),t.xp6(1),t.Q6J("ngIf","Email already exists"==s.errorTxt),t.xp6(1),t.Q6J("ngIf","Both Email and Phone number already exist"==s.errorTxt),t.xp6(1),t.Q6J("hideRequiredMarker",!0),t.xp6(1),t.Q6J("preferredCountries",t.DdM(24,Y))("enablePlaceholder",!0)("enableSearch",!0),t.xp6(3),t.hij("eg : ",r.selectedCountry.placeHolder,""),t.xp6(1),t.Q6J("ngIf","Invalid Phone"==s.errorTxt),t.xp6(1),t.Q6J("ngIf","Phone number already exists"==s.errorTxt),t.xp6(1),t.Q6J("ngIf","Both Email and Phone number already exist"==s.errorTxt),t.xp6(1),t.Q6J("hideRequiredMarker",!0),t.xp6(4),t.Q6J("ngIf","Invalid Password"==s.errorTxt),t.xp6(1),t.Q6J("ngIf","Password does not match"==s.errorTxt),t.xp6(1),t.Q6J("hideRequiredMarker",!0),t.xp6(4),t.Q6J("ngIf",!s.isAddingUser),t.xp6(1),t.Q6J("ngIf",s.isAddingUser)}}function z(e,i){1&e&&(t.TgZ(0,"div",28),t._UZ(1,"mat-progress-spinner",30),t.qZA()),2&e&&(t.xp6(1),t.Q6J("diameter",70))}const R=[{path:"",component:(()=>{class e{constructor(r,s,m,H,D,$,G){this.formBuilder=r,this.router=s,this.currencyService=m,this.avatarService=H,this.loginService=D,this.snackBar=$,this.signupService=G,this.userId=this.loginService.getSessionFromStorage(g.E1),this.isLoading=!0,this.isLoadingAvatar=!1,this.isLoadingCurrency=!1,this.isAddingUser=!1,this.currencies=[],this.avatars=[]}ngOnInit(){this.initForm(),this.getData()}getData(){this.isLoading=!0,this.isLoadingAvatar=!0,this.isLoadingCurrency=!0,this.catSub=this.currencyService.getCurrencies().subscribe(r=>{this.currencies=r,this.isLoadingCurrency=!1,0==this.isLoadingAvatar&&(this.isLoading=!1)}),this.avatarSub=this.avatarService.getAvatars().subscribe(r=>{this.avatars=r,this.isLoadingAvatar=!1,0==this.isLoadingCurrency&&(this.isLoading=!1)})}initForm(){this.usernameCtrl=this.formBuilder.control("",a.kI.required),this.emailCtrl=this.formBuilder.control("",a.kI.required),this.phoneCtrl=this.formBuilder.control("",a.kI.required),this.currencyCtrl=this.formBuilder.control("",a.kI.required),this.avatarCtrl=this.formBuilder.control("",a.kI.required),this.passCtrl=this.formBuilder.control("",a.kI.required),this.confPassCtrl=this.formBuilder.control("",a.kI.required),this.createAccountForm=this.formBuilder.group({username:this.usernameCtrl,phone:this.phoneCtrl,email:this.emailCtrl,currency:this.currencyCtrl,avatar:this.avatarCtrl,pass:this.passCtrl,confpass:this.confPassCtrl})}signup(){return this.errorTxt="",/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,12}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,5}[a-zA-Z0-9])?)*$/gi.test(this.createAccountForm.value.email)?this.createAccountForm.value.pass!==this.createAccountForm.value.confpass?(this.passCtrl.setErrors(a.kI.required),this.confPassCtrl.setErrors(a.kI.required),void(this.errorTxt="Password does not match")):/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{8,}$/.test(this.createAccountForm.value.pass)?void this.newAccount():(this.passCtrl.setErrors(a.kI.required),void(this.errorTxt="Invalid Password")):(this.emailCtrl.setErrors(a.kI.required),void(this.errorTxt="Invalid Email"))}newAccount(){this.isAddingUser=!0,this.signupSub=this.signupService.signUp(this.createAccountForm).subscribe({next:r=>{"Email already exists"==r.message?(this.isAddingUser=!1,this.errorTxt="Email already exists",this.emailCtrl.setErrors(a.kI.required)):"Phone number already exists"==r.message?(this.isAddingUser=!1,this.errorTxt="Phone number already exists",this.phoneCtrl.setErrors(a.kI.required)):"Both Email and Phone number already exist"==r.message?(this.isAddingUser=!1,this.errorTxt="Both Email and Phone number already exist",this.emailCtrl.setErrors(a.kI.required),this.phoneCtrl.setErrors(a.kI.required)):"User created successfully"==r.message?(this.isAddingUser=!1,this.errorTxt="",this.router.navigateByUrl("login"),this.snackBar.open("User created successfully","dismiss",{duration:3e3})):(this.isAddingUser=!1,this.errorTxt="",this.snackBar.open("Unkown Operation","dismiss",{duration:3e3}))},error:r=>{this.isAddingUser=!1,"404"==r.status?this.snackBar.open("Transaction not found","dismiss",{duration:3e3}):"502"==r.status?this.snackBar.open("Connection timed out, Try again later","dismiss",{duration:3e3}):(this.snackBar.open(r.error.message,"dismiss",{duration:3e3}),console.log("error =>"+r.error.message))}})}LoginInstead(){this.router.navigateByUrl("login")}}return e.\u0275fac=function(r){return new(r||e)(t.Y36(a.qu),t.Y36(d.F0),t.Y36(f.i),t.Y36(h.o),t.Y36(x.r),t.Y36(v.ux),t.Y36(C.v))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-sign-up"]],decls:3,vars:2,consts:[["fxLayout","column","fxLayoutAlign","center center",1,"container"],["fxLayout","column","fxLayoutAlign","center center",4,"ngIf"],["class","spinner","fxLayout","column","fxLayoutAlign","center center",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center"],[1,"title"],["fxLayout","column","fxLayoutAlign","stretch","autocomplete","off",3,"formGroup"],["appearance","outline",3,"hideRequiredMarker"],["matInput","","maxlength","256","formControlName","username",1,"username"],["appearance","fill",3,"hideRequiredMarker"],["formControlName","currency"],[3,"value",4,"ngFor","ngForOf"],["formControlName","avatar"],["class","avatar-list",3,"value",4,"ngFor","ngForOf"],["matInput","","maxlength","256","formControlName","email",1,"emaail"],["class","error",4,"ngIf"],["formControlName","phone","name","phone",3,"preferredCountries","enablePlaceholder","enableSearch"],["phone",""],["matInput","","maxlength","256","type","password","formControlName","pass",1,"password"],["matInput","","maxlength","256","type","password","formControlName","confpass",1,"password"],["mat-raised-button","","color","primary",3,"disabled","click",4,"ngIf"],[1,"have_an_account"],[1,"login",3,"click"],[3,"value"],["fxFlex","10","alt","",1,"icon",3,"src"],["fxFlex",""],[1,"avatar-list",3,"value"],[1,"error"],["mat-raised-button","","color","primary",3,"disabled","click"],["fxLayout","column","fxLayoutAlign","center center",1,"spinner"],["mode","indeterminate"],["mode","indeterminate",3,"diameter"]],template:function(r,s){1&r&&(t.TgZ(0,"div",0),t.YNc(1,O,49,25,"mat-card",1),t.YNc(2,z,2,1,"div",2),t.qZA()),2&r&&(t.xp6(1),t.Q6J("ngIf",!s.isLoading),t.xp6(1),t.Q6J("ngIf",s.isLoading))},directives:[l.xw,l.Wh,o.O5,U.a8,a._Y,a.JL,a.sg,c.KE,c.hX,Z.Nt,a.Fj,a.nD,a.JJ,a.u,A.gD,o.sg,_.ey,l.yH,y.dK,c.bx,T.lW,S.pW,I.Ou],styles:[".container[_ngcontent-%COMP%]{min-height:100%;background-color:#f0f2f5}.icon[_ngcontent-%COMP%]{max-width:20%!important;max-height:20%!important}.title[_ngcontent-%COMP%]{font-weight:500;font-size:1rem;margin-bottom:1rem}.error[_ngcontent-%COMP%]{color:red;font-size:1rem;font-weight:500;margin-left:.5rem;margin-bottom:5px}.pass-error[_ngcontent-%COMP%]{color:red;font-size:.5rem;font-weight:500;margin-left:.5rem;margin-bottom:5px}.have_an_account[_ngcontent-%COMP%]{margin-top:10px}.login[_ngcontent-%COMP%]{font-weight:500;color:#00f}.login[_ngcontent-%COMP%]:hover{cursor:pointer;text-decoration:underline}mat-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{min-width:300px}.country-selector[_ngcontent-%COMP%]{opacity:1!important}mat-hint[_ngcontent-%COMP%]{margin-top:5px}"]}),e})(),pathMatch:"full"}];let w=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[d.Bz.forChild(R)]]}),e})(),j=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[o.ez,w,p.m]]}),e})()}}]);