"use strict";(self.webpackChunkMyMoney=self.webpackChunkMyMoney||[]).push([[783],{4783:(at,y,i)=>{i.r(y),i.d(y,{HomeModule:()=>rt});var m=i(9808),L=i(1592),v=i(1083),u=i(8505),b=i(7272),p=i(7503),H=i(9841),F=i(9176),t=i(5e3),C=i(8480),_=i(8762),P=i(8966),T=i(1271),A=i(6290),M=i(9224),g=i(7093),S=i(5245),D=i(3322),f=i(4623),I=i(4834),Z=i(7423);let J=(()=>{class e{transform(n){let o=new Date(n),a=new Date,c=new Date((new Date).setDate((new Date).getDate()-1)),s=new Date;s.setDate(a.getDate()-a.getDay());let d=new Date(s);return d.setDate(s.getDate()-7),o.setHours(0,0,0,0),a.setHours(0,0,0,0),c.setHours(0,0,0,0),s.setHours(0,0,0,0),d.setHours(0,0,0,0),o.getTime()===a.getTime()?"Today":o.getTime()===c.getTime()?"Yesterday":o>=s&&o<c?"This week":o<s&&o>=d?"Last week":"This month"}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275pipe=t.Yjl({name:"elapsedTime",type:e,pure:!0}),e})();var U=i(4591);function w(e,r){1&e&&(t.TgZ(0,"mat-icon",15),t._uU(1,"arrow_upward"),t.qZA())}function E(e,r){1&e&&(t.TgZ(0,"mat-icon",16),t._uU(1,"arrow_downward"),t.qZA())}const Y=function(e){return{color:e}};function N(e,r){if(1&e&&(t.TgZ(0,"div",6)(1,"mat-card",7)(2,"p",8),t._uU(3,"Spent this month "),t.YNc(4,w,2,0,"mat-icon",9),t.YNc(5,E,2,0,"mat-icon",10),t.TgZ(6,"span",11),t._uU(7),t.qZA()(),t.TgZ(8,"p",12)(9,"span"),t._uU(10),t.ALo(11,"number"),t.qZA(),t.TgZ(12,"span",13),t._UZ(13,"img",14),t.qZA()()()()),2&e){const n=t.oxw();t.xp6(4),t.Q6J("ngIf",n.expense_difference>0),t.xp6(1),t.Q6J("ngIf",n.expense_difference<0),t.xp6(1),t.Q6J("ngStyle",t.VKq(10,Y,n.expense_difference>0?"red":"green")),t.xp6(1),t.AsE("",n.expense_difference," ",n.userCurrency,""),t.xp6(3),t.hij("",t.xi3(11,7,n.current_expense,"1.0-3")," "),t.xp6(3),t.MGl("src","assets/flags/",n.userCurrency,".png",t.LSH)}}function Q(e,r){if(1&e){const n=t.EpF();t.TgZ(0,"mat-list-item",23),t.NdJ("click",function(){const c=t.CHM(n).$implicit;return t.oxw(3).showDetails(c.id,c.category,c.description,c.amount,c.time)}),t._UZ(1,"img",24),t.TgZ(2,"div",25)(3,"span",26),t._uU(4),t.qZA(),t.TgZ(5,"span",27),t._uU(6),t.ALo(7,"description"),t.qZA()(),t.TgZ(8,"div",28)(9,"span",29),t._uU(10),t.ALo(11,"number"),t.qZA(),t.TgZ(12,"span",30),t._uU(13),t.qZA()()()}if(2&e){const n=r.$implicit,o=t.oxw(3);t.xp6(1),t.MGl("src","assets/categories/",n.category,".png",t.LSH),t.xp6(3),t.Oqu(n.category),t.xp6(2),t.Oqu(t.lcZ(7,6,n.description)),t.xp6(4),t.AsE("",t.xi3(11,8,n.amount,"1.0-3")," ","NONE"==o.userCurrency?"":o.userCurrency," "),t.xp6(3),t.Oqu(n.time)}}function B(e,r){if(1&e&&(t.TgZ(0,"mat-list")(1,"div",19)(2,"span",20),t._uU(3),t.ALo(4,"elapsedTime"),t.ALo(5,"date"),t.qZA(),t.TgZ(6,"span",21),t._uU(7),t.ALo(8,"number"),t.qZA()(),t._UZ(9,"mat-divider"),t.YNc(10,Q,14,11,"mat-list-item",22),t.qZA()),2&e){const n=r.$implicit,o=t.oxw(2);t.xp6(3),t.AsE("",t.lcZ(4,5,n.date)," ",t.xi3(5,7,n.date,"mediumDate"),""),t.xp6(4),t.AsE("",t.xi3(8,10,n.total,"1.0-3")," ","NONE"==o.userCurrency?"":o.userCurrency,""),t.xp6(3),t.Q6J("ngForOf",n.transactions)}}function k(e,r){if(1&e&&(t.TgZ(0,"div",17),t.YNc(1,B,11,13,"mat-list",18),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngForOf",n.dailyHistory)}}function $(e,r){1&e&&(t.TgZ(0,"div",31),t._UZ(1,"img",32),t.qZA())}function R(e,r){if(1&e){const n=t.EpF();t.TgZ(0,"div",33)(1,"button",34),t.NdJ("click",function(){return t.CHM(n),t.oxw().reTry()}),t._uU(2,"Retry"),t.qZA()()}2&e&&(t.xp6(1),t.Q6J("color","primary"))}let q=(()=>{class e{constructor(n,o,a,c){this.transactionsService=n,this.loginService=o,this.dialog=a,this.snackBar=c,this.month=((new Date).getMonth()+1).toString().length>1?((new Date).getMonth()+1).toString():"0"+((new Date).getMonth()+1).toString(),this.Lastmonth=(Number(this.month)-1).toString(),this.year=(new Date).getFullYear().toString(),this.date=this.month.toString().slice(-2)+"-"+(new Date).getFullYear().toString(),this.userId=this.loginService.getSessionFromStorage(p.E1),this.userCurrency=this.loginService.getSessionFromStorage(p.tO),this.transaction_monthly_data=[],this.currentExpense$=this.transactionsService.getCurrentMonthExpenseTotal(this.userId,this.year,this.month),this.lastExpense$=this.transactionsService.getCurrentMonthExpenseTotal(this.userId,this.year,this.Lastmonth),this.dailyHistory$=this.transactionsService.getDailyTransaction(this.userId,this.year,this.month),this.current_expense=0,this.last_expense=0,this.expense_difference=0,this.selectedItemIndex=0,this.isLoading=!1,this.retry=!1,this.dailyHistory=[]}ngOnInit(){this.getMonthlyExpensesData()}showDetails(n,o,a,c,s){this.dialog.open(F.o,{data:{id:n,userId:this.userId,category:o,description:a,amount:c,time:s}}).afterClosed().subscribe(x=>{x&&this.getMonthlyExpensesData()})}getExpencesDifference(n,o){return o-n}getMonthlyExpensesData(){this.isLoading=!0;const n=this.currentExpense$.pipe((0,u.b)(s=>{this.current_expense=s})),o=this.lastExpense$.pipe((0,u.b)(s=>{this.last_expense=s})),a=(0,H.a)([n,o]).pipe((0,u.b)(([s,d])=>{const x=this.getExpencesDifference(d,s);this.expense_difference=Math.trunc(x)})),c=this.dailyHistory$.pipe((0,u.b)(s=>{this.dailyHistory=s}));this.subscription=(0,b.z)(n,o,a,c).subscribe({complete:()=>{this.isLoading=!1},error:s=>{this.isLoading=!1,this.retry=!0,"404"==s.status?this.snackBar.open("Transaction not found","dismiss",{duration:3e3}):"502"==s.status?this.snackBar.open("Connection timed out, Try again later","dismiss",{duration:3e3}):(this.snackBar.open(s.message,"dismiss",{duration:3e3}),console.log("error =>"+s.message))}})}reTry(){this.retry=!1,this.getMonthlyExpensesData()}ngOnDestroy(){this.subscription.unsubscribe()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(C.v),t.Y36(_.r),t.Y36(P.uw),t.Y36(T.ux))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-home"]],decls:6,vars:5,consts:[[3,"title"],[1,"mobile"],["class","expense",4,"ngIf"],["class","history",4,"ngIf"],["class","spinner","fxLayoutAlign","center center",4,"ngIf"],["class","retry min_height_90","fxLayoutAlign","center center",4,"ngIf"],[1,"expense"],["fxLayout","column","fxLayoutAlign","center center"],[1,"expense_title"],["style","color:red",4,"ngIf"],["style","color:green",4,"ngIf"],[3,"ngStyle"],["fxLayout","row","fxLayoutAlign","center center",1,"expense_value"],[1,"expense_flag"],[3,"src"],[2,"color","red"],[2,"color","green"],[1,"history"],[4,"ngFor","ngForOf"],["mat-subheader",""],["fxFlex","50","fxLayoutAlign","start",1,"date"],["fxFlex","50","fxLayoutAlign","end",1,"daily_total"],["class","list_item",3,"click",4,"ngFor","ngForOf"],[1,"list_item",3,"click"],["fxFlex","10",1,"category",3,"src"],["fxLayout","column","fxFlex","45","fxLayoutAlign","center start",1,"description"],[1,"name","font_weight_500"],[1,"desc","color_A9A9A9"],["fxLayout","column","fxFlex","","fxLayoutAlign","center end",1,"value"],[1,"amount","font_weight_500"],[1,"hour","color_A9A9A9"],["fxLayoutAlign","center center",1,"spinner"],["src","assets/loading.gif","alt","loading"],["fxLayoutAlign","center center",1,"retry","min_height_90"],["mat-flat-button","",3,"color","click"]],template:function(n,o){1&n&&(t._UZ(0,"app-header",0),t.TgZ(1,"div",1),t.YNc(2,N,14,12,"div",2),t.YNc(3,k,2,1,"div",3),t.YNc(4,$,2,0,"div",4),t.YNc(5,R,3,1,"div",5),t.qZA()),2&n&&(t.Q6J("title","My Bucks"),t.xp6(2),t.Q6J("ngIf",!o.isLoading&&!o.retry),t.xp6(1),t.Q6J("ngIf",!o.isLoading&&!o.retry),t.xp6(1),t.Q6J("ngIf",o.isLoading),t.xp6(1),t.Q6J("ngIf",o.retry))},directives:[A.G,m.O5,M.a8,g.xw,g.Wh,S.Hw,m.PC,D.Zl,m.sg,f.i$,f.gs,g.yH,I.d,f.Tg,Z.lW],pipes:[m.JJ,J,m.uU,U.O],styles:[".mobile[_ngcontent-%COMP%]{min-width:350px;max-width:1000px;padding-bottom:5rem;margin:auto}.mobile[_ngcontent-%COMP%]   .expense[_ngcontent-%COMP%]{margin:1rem;min-width:20rem}.mobile[_ngcontent-%COMP%]   .expense[_ngcontent-%COMP%]   .expense_title[_ngcontent-%COMP%]{font-size:1rem}.mobile[_ngcontent-%COMP%]   .expense[_ngcontent-%COMP%]   .expense_title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{height:1rem;width:1rem;font-size:1rem}.mobile[_ngcontent-%COMP%]   .expense[_ngcontent-%COMP%]   .expense_value[_ngcontent-%COMP%]{font-weight:500;font-size:3rem}.mobile[_ngcontent-%COMP%]   .expense[_ngcontent-%COMP%]   .expense_flag[_ngcontent-%COMP%]{margin-left:1rem}.mobile[_ngcontent-%COMP%]   .history[_ngcontent-%COMP%]   .category[_ngcontent-%COMP%]{margin:.5rem}.mobile[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{margin:0;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.mobile[_ngcontent-%COMP%]   .category[_ngcontent-%COMP%]{max-width:45px!important;max-height:45px}.mobile[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]{display:none;align-items:center;background:#1fb141;border-radius:50%;box-shadow:0 1px 6px #0000000f,0 2px 32px #00000029;cursor:pointer;display:flex;height:3rem;justify-content:center;position:fixed;right:20px;bottom:80px;width:3rem}.height_50[_ngcontent-%COMP%]{height:50%}.font_weight_500[_ngcontent-%COMP%]{font-weight:500}.color_A9A9A9[_ngcontent-%COMP%]{color:#a9a9a9}.mat-subheader[_ngcontent-%COMP%]{padding:0 1rem}mat-list-item[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}.list_item[_ngcontent-%COMP%]:active{background-color:#f2f2f2;transition:background-color}.list_item[_ngcontent-%COMP%]:hover{cursor:pointer}"]}),e})();var l=i(3075),z=i(520);let G=(()=>{class e{constructor(n){this.http=n}getCategories(){return this.http.get(p.FH+"categories")}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(z.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var h=i(7322),W=i(7531),O=i(24),j=i(6856),X=i(4107),K=i(508),V=i(5899);function tt(e,r){if(1&e&&(t.TgZ(0,"mat-option",17),t._UZ(1,"img",18),t.TgZ(2,"span",19),t._uU(3),t.qZA()()),2&e){const n=r.$implicit;t.Q6J("value",n.id),t.xp6(1),t.MGl("src","assets/categories/",n.name,".png",t.LSH),t.xp6(2),t.Oqu(n.name)}}function et(e,r){if(1&e){const n=t.EpF();t.TgZ(0,"button",20),t.NdJ("click",function(){return t.CHM(n),t.oxw().add_trans()}),t.TgZ(1,"span"),t._uU(2,"Add"),t.qZA()()}if(2&e){const n=t.oxw();t.Q6J("disabled",n.isLoading)("disabled",!n.addTransactionForm.valid)}}function nt(e,r){1&e&&t._UZ(0,"mat-progress-bar",23)}function ot(e,r){if(1&e&&(t.TgZ(0,"div",21),t.YNc(1,nt,1,0,"mat-progress-bar",22),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.isLoading)}}const it=[{path:"",component:q},{path:"add",component:(()=>{class e{constructor(n,o,a,c,s,d){this.formBuilder=n,this.categoryService=o,this.transactionService=a,this.loginService=c,this.snackBar=s,this.router=d,this.userId=this.loginService.getSessionFromStorage(p.E1),this.isLoading=!1,this.categories=[],this.pipe=new m.uU("en-US")}ngOnInit(){this.initForm(),this.catSub=this.categoryService.getCategories().subscribe(n=>{this.categories=n})}ngOnDestroy(){this.catSub.unsubscribe()}initForm(){this.amountCtrl=this.formBuilder.control("",l.kI.required),this.descriptionCtrl=this.formBuilder.control("",l.kI.required),this.categoryCtrl=this.formBuilder.control("",l.kI.required),this.dateCtrl=this.formBuilder.control("",l.kI.required),this.addTransactionForm=this.formBuilder.group({amount:this.amountCtrl,description:this.descriptionCtrl,date:this.dateCtrl,category:this.categoryCtrl})}add_trans(){this.isLoading=!0;const n=this.addTransactionForm.value.amount,o=this.addTransactionForm.value.description,a=this.addTransactionForm.value.category,c=this.pipe.transform(this.addTransactionForm.value.date,"yyyy-MM-dd HH:mm:ss");this.transactionService.addTransaction(this.userId,a,n,o,c.toString()).subscribe({next:s=>{this.snackBar.open(s.message,"dismiss",{duration:3e3}),this.isLoading=!1,this.router.navigateByUrl("home")},error:s=>{"404"==s.status?this.snackBar.open("Transaction not found","dismiss",{duration:3e3}):"502"==s.status?this.snackBar.open("Connection timed out, Try again later","dismiss",{duration:3e3}):(this.snackBar.open(s.message,"dismiss",{duration:3e3}),console.log("error =>"+s.message))}})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(l.qu),t.Y36(G),t.Y36(C.v),t.Y36(_.r),t.Y36(T.ux),t.Y36(v.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-add-transactions"]],decls:27,vars:11,consts:[[3,"title"],["fxLayout","column","fxLayoutAlign","center center",1,"container"],["fxLayout","column","fxLayoutAlign","center center"],["src","assets/add_transaction.png","alt","add_transaction",1,"img_title"],[1,"title"],["fxLayout","column","fxLayoutAlign","stretch",3,"formGroup"],["appearance","outline",3,"hideRequiredMarker"],["matInput","","maxlength","256","type","number","formControlName","amount",1,"amount"],["matInput","","maxlength","256","type","","formControlName","description"],["matInput","","placeholder","Choose a date & time","formControlName","date",3,"ngxMatDatetimePicker"],["matSuffix","",3,"for"],["picker",""],["appearance","fill",3,"hideRequiredMarker"],["formControlName","category"],[3,"value",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"disabled","click",4,"ngIf"],["class","spinner","fxLayout","column","fxLayoutAlign","center center",4,"ngIf"],[3,"value"],["fxFlex","10","alt","",1,"category_icon",3,"src"],["fxFlex",""],["mat-raised-button","","color","primary",3,"disabled","click"],["fxLayout","column","fxLayoutAlign","center center",1,"spinner"],["mode","indeterminate",4,"ngIf"],["mode","indeterminate"]],template:function(n,o){if(1&n&&(t._UZ(0,"app-header",0),t.TgZ(1,"div",1)(2,"mat-card",2),t._UZ(3,"img",3),t.TgZ(4,"span",4),t._uU(5,"Add Transaction"),t.qZA(),t.TgZ(6,"form",5)(7,"mat-form-field",6)(8,"mat-label"),t._uU(9,"Amount"),t.qZA(),t._UZ(10,"input",7),t.qZA(),t.TgZ(11,"mat-form-field",6)(12,"mat-label"),t._uU(13,"Description"),t.qZA(),t._UZ(14,"input",8),t.qZA(),t.TgZ(15,"mat-form-field",6),t._UZ(16,"input",9)(17,"mat-datepicker-toggle",10)(18,"ngx-mat-datetime-picker",null,11),t.qZA(),t.TgZ(20,"mat-form-field",12)(21,"mat-label"),t._uU(22,"Category"),t.qZA(),t.TgZ(23,"mat-select",13),t.YNc(24,tt,4,3,"mat-option",14),t.qZA()(),t.YNc(25,et,3,2,"button",15),t.YNc(26,ot,2,1,"div",16),t.qZA()()()),2&n){const a=t.MAs(19);t.Q6J("title","Add Transaction"),t.xp6(6),t.Q6J("formGroup",o.addTransactionForm),t.xp6(1),t.Q6J("hideRequiredMarker",!0),t.xp6(4),t.Q6J("hideRequiredMarker",!0),t.xp6(4),t.Q6J("hideRequiredMarker",!0),t.xp6(1),t.Q6J("ngxMatDatetimePicker",a),t.xp6(1),t.Q6J("for",a),t.xp6(3),t.Q6J("hideRequiredMarker",!0),t.xp6(4),t.Q6J("ngForOf",o.categories),t.xp6(1),t.Q6J("ngIf",!o.isLoading),t.xp6(1),t.Q6J("ngIf",o.isLoading)}},directives:[A.G,g.xw,g.Wh,M.a8,l._Y,l.JL,l.sg,h.KE,h.hX,W.Nt,l.wV,l.Fj,l.nD,l.JJ,l.u,O.g2,j.nW,h.R9,O.AB,X.gD,m.sg,K.ey,g.yH,m.O5,Z.lW,V.pW],styles:[".container[_ngcontent-%COMP%]{min-height:90%}.category_icon[_ngcontent-%COMP%]{max-width:20%!important}.title[_ngcontent-%COMP%]{font-weight:500;font-size:1rem;margin-bottom:1rem}"]}),e})()}];let st=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[v.Bz.forChild(it)]]}),e})(),rt=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[m.ez,st,L.m]]}),e})()}}]);