"use strict";(self.webpackChunkMyMoney=self.webpackChunkMyMoney||[]).push([[783],{4783:(it,x,s)=>{s.r(x),s.d(x,{HomeModule:()=>ot});var m=s(9808),Z=s(2324),y=s(1083),u=s(8505),O=s(7272),p=s(7503),L=s(9841),b=s(9176),t=s(5e3),v=s(8480),C=s(8762),S=s(8966),T=s(1271),_=s(6290),A=s(9224),g=s(7093),D=s(5245),F=s(3322),f=s(4623),H=s(4834);let P=(()=>{class n{transform(e){let o=new Date(e),c=new Date,a=new Date((new Date).setDate((new Date).getDate()-1)),i=new Date;i.setDate(c.getDate()-c.getDay());let d=new Date(i);return d.setDate(i.getDate()-7),o.setHours(0,0,0,0),c.setHours(0,0,0,0),a.setHours(0,0,0,0),i.setHours(0,0,0,0),d.setHours(0,0,0,0),o.getTime()===c.getTime()?(console.log(c.getDay()),"Today"):o.getTime()===a.getTime()?"Yesterday":o>=i&&o<a?"This week":o<i&&o>=d?"Last week":"This month"}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=t.Yjl({name:"elapsedTime",type:n,pure:!0}),n})();var I=s(4591);function w(n,r){1&n&&(t.TgZ(0,"mat-icon",14),t._uU(1,"arrow_upward"),t.qZA())}function U(n,r){1&n&&(t.TgZ(0,"mat-icon",15),t._uU(1,"arrow_downward"),t.qZA())}const J=function(n){return{color:n}};function E(n,r){if(1&n&&(t.TgZ(0,"div",5)(1,"mat-card",6)(2,"p",7),t._uU(3,"Spent this month "),t.YNc(4,w,2,0,"mat-icon",8),t.YNc(5,U,2,0,"mat-icon",9),t.TgZ(6,"span",10),t._uU(7),t.qZA()(),t.TgZ(8,"p",11)(9,"span"),t._uU(10),t.ALo(11,"number"),t.qZA(),t.TgZ(12,"span",12),t._UZ(13,"img",13),t.qZA()()()()),2&n){const e=t.oxw();t.xp6(4),t.Q6J("ngIf",e.expense_difference>0),t.xp6(1),t.Q6J("ngIf",e.expense_difference<0),t.xp6(1),t.Q6J("ngStyle",t.VKq(10,J,e.expense_difference>0?"red":"green")),t.xp6(1),t.AsE("",e.expense_difference," ",e.userCurrency,""),t.xp6(3),t.hij("",t.xi3(11,7,e.current_expense,"1.0-3")," "),t.xp6(3),t.MGl("src","assets/flags/",e.userCurrency,".png",t.LSH)}}function Y(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"mat-list-item",22),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw(3).showDetails(a.id,a.category,a.description,a.amount,a.time)}),t._UZ(1,"img",23),t.TgZ(2,"div",24)(3,"span",25),t._uU(4),t.qZA(),t.TgZ(5,"span",26),t._uU(6),t.ALo(7,"description"),t.qZA()(),t.TgZ(8,"div",27)(9,"span",28),t._uU(10),t.ALo(11,"number"),t.qZA(),t.TgZ(12,"span",29),t._uU(13),t.qZA()()()}if(2&n){const e=r.$implicit,o=t.oxw(3);t.xp6(1),t.MGl("src","assets/categories/",e.category,".png",t.LSH),t.xp6(3),t.Oqu(e.category),t.xp6(2),t.Oqu(t.lcZ(7,6,e.description)),t.xp6(4),t.AsE("",t.xi3(11,8,e.amount,"1.0-3")," ","NONE"==o.userCurrency?"":o.userCurrency," "),t.xp6(3),t.Oqu(e.time)}}function N(n,r){if(1&n&&(t.TgZ(0,"mat-list")(1,"div",18)(2,"span",19),t._uU(3),t.ALo(4,"elapsedTime"),t.ALo(5,"date"),t.qZA(),t.TgZ(6,"span",20),t._uU(7),t.ALo(8,"number"),t.qZA()(),t._UZ(9,"mat-divider"),t.YNc(10,Y,14,11,"mat-list-item",21),t.qZA()),2&n){const e=r.$implicit,o=t.oxw(2);t.xp6(3),t.AsE("",t.lcZ(4,5,e.date)," ",t.xi3(5,7,e.date,"mediumDate"),""),t.xp6(4),t.AsE("",t.xi3(8,10,e.total,"1.0-3")," ","NONE"==o.userCurrency?"":o.userCurrency,""),t.xp6(3),t.Q6J("ngForOf",e.transactions)}}function Q(n,r){if(1&n&&(t.TgZ(0,"div",16),t.YNc(1,N,11,13,"mat-list",17),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.dailyHistory)}}function B(n,r){1&n&&(t.TgZ(0,"div",30),t._UZ(1,"img",31),t.qZA())}let $=(()=>{class n{constructor(e,o,c,a){this.transactionsService=e,this.loginService=o,this.dialog=c,this.snackBar=a,this.month=((new Date).getMonth()+1).toString().length>1?((new Date).getMonth()+1).toString():"0"+((new Date).getMonth()+1).toString(),this.Lastmonth=(Number(this.month)-1).toString(),this.year=(new Date).getFullYear().toString(),this.date=this.month.toString().slice(-2)+"-"+(new Date).getFullYear().toString(),this.userId=this.loginService.getSessionFromStorage(p.E),this.userCurrency=this.loginService.getSessionFromStorage(p.t),this.transaction_monthly_data=[],this.currentExpense$=this.transactionsService.getCurrentMonthExpenseTotal(this.userId,this.year,this.month),this.lastExpense$=this.transactionsService.getCurrentMonthExpenseTotal(this.userId,this.year,this.Lastmonth),this.dailyHistory$=this.transactionsService.getDailyTransaction(this.userId,this.year,this.month),this.current_expense=0,this.last_expense=0,this.expense_difference=0,this.selectedItemIndex=0,this.isLoading=!1,this.dailyHistory=[]}ngOnInit(){this.getMonthlyExpensesData()}showDetails(e,o,c,a,i){this.dialog.open(b.o,{data:{id:e,userId:this.userId,category:o,description:c,amount:a,time:i}}).afterClosed().subscribe(h=>{h&&this.getMonthlyExpensesData()})}getExpencesDifference(e,o){return o-e}getMonthlyExpensesData(){this.isLoading=!0;const e=this.currentExpense$.pipe((0,u.b)(i=>{console.log("current: "+i),this.current_expense=i})),o=this.lastExpense$.pipe((0,u.b)(i=>{console.log("last:"+i),this.last_expense=i})),c=(0,L.a)([e,o]).pipe((0,u.b)(([i,d])=>{const h=this.getExpencesDifference(d,i);this.expense_difference=Math.trunc(h)})),a=this.dailyHistory$.pipe((0,u.b)(i=>{this.dailyHistory=i}));this.subscription=(0,O.z)(e,o,c,a).subscribe({complete:()=>{this.isLoading=!1},error:i=>{this.isLoading=!1,"404"==i.status?this.snackBar.open("Transaction not found","dismiss",{duration:3e3}):"502"==i.status?this.snackBar.open("Connection timed out, Try again later","dismiss",{duration:3e3}):(this.snackBar.open(i.message,"dismiss",{duration:3e3}),console.log("error =>"+i.message))}})}ngOnDestroy(){this.subscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(v.v),t.Y36(C.r),t.Y36(S.uw),t.Y36(T.ux))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-home"]],decls:5,vars:4,consts:[[3,"title"],[1,"mobile"],["class","expense",4,"ngIf"],["class","history",4,"ngIf"],["class","spinner","fxLayoutAlign","center center",4,"ngIf"],[1,"expense"],["fxLayout","column","fxLayoutAlign","center center"],[1,"expense_title"],["style","color:red",4,"ngIf"],["style","color:green",4,"ngIf"],[3,"ngStyle"],["fxLayout","row","fxLayoutAlign","center center",1,"expense_value"],[1,"expense_flag"],[3,"src"],[2,"color","red"],[2,"color","green"],[1,"history"],[4,"ngFor","ngForOf"],["mat-subheader",""],["fxFlex","50","fxLayoutAlign","start",1,"date"],["fxFlex","50","fxLayoutAlign","end",1,"daily_total"],["class","list_item",3,"click",4,"ngFor","ngForOf"],[1,"list_item",3,"click"],["fxFlex","10",1,"category",3,"src"],["fxLayout","column","fxFlex","45","fxLayoutAlign","center start",1,"description"],[1,"name","font_weight_500"],[1,"desc","color_A9A9A9"],["fxLayout","column","fxFlex","","fxLayoutAlign","center end",1,"value"],[1,"amount","font_weight_500"],[1,"hour","color_A9A9A9"],["fxLayoutAlign","center center",1,"spinner"],["src","assets/loading.gif","alt","loading"]],template:function(e,o){1&e&&(t._UZ(0,"app-header",0),t.TgZ(1,"div",1),t.YNc(2,E,14,12,"div",2),t.YNc(3,Q,2,1,"div",3),t.YNc(4,B,2,0,"div",4),t.qZA()),2&e&&(t.Q6J("title","My Bucks"),t.xp6(2),t.Q6J("ngIf",!o.isLoading),t.xp6(1),t.Q6J("ngIf",!o.isLoading),t.xp6(1),t.Q6J("ngIf",o.isLoading))},directives:[_.G,m.O5,A.a8,g.xw,g.Wh,D.Hw,m.PC,F.Zl,m.sg,f.i$,f.gs,g.yH,H.d,f.Tg],pipes:[m.JJ,P,m.uU,I.O],styles:[".mobile[_ngcontent-%COMP%]{min-width:350px;max-width:1000px;padding-bottom:5rem;margin:auto}.mobile[_ngcontent-%COMP%]   .expense[_ngcontent-%COMP%]{margin:1rem;min-width:20rem}.mobile[_ngcontent-%COMP%]   .expense[_ngcontent-%COMP%]   .expense_title[_ngcontent-%COMP%]{font-size:1rem}.mobile[_ngcontent-%COMP%]   .expense[_ngcontent-%COMP%]   .expense_title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{height:1rem;width:1rem;font-size:1rem}.mobile[_ngcontent-%COMP%]   .expense[_ngcontent-%COMP%]   .expense_value[_ngcontent-%COMP%]{font-weight:500;font-size:3rem}.mobile[_ngcontent-%COMP%]   .expense[_ngcontent-%COMP%]   .expense_flag[_ngcontent-%COMP%]{margin-left:1rem}.mobile[_ngcontent-%COMP%]   .history[_ngcontent-%COMP%]   .category[_ngcontent-%COMP%]{margin:.5rem}.mobile[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{margin:0;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.mobile[_ngcontent-%COMP%]   .category[_ngcontent-%COMP%]{max-width:45px!important;max-height:45px}.mobile[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]{display:none;align-items:center;background:#1fb141;border-radius:50%;box-shadow:0 1px 6px #0000000f,0 2px 32px #00000029;cursor:pointer;display:flex;height:3rem;justify-content:center;position:fixed;right:20px;bottom:80px;width:3rem}.height_50[_ngcontent-%COMP%]{height:50%}.font_weight_500[_ngcontent-%COMP%]{font-weight:500}.color_A9A9A9[_ngcontent-%COMP%]{color:#a9a9a9}.mat-subheader[_ngcontent-%COMP%]{padding:0 1rem}mat-list-item[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}.list_item[_ngcontent-%COMP%]:active{background-color:#f2f2f2;transition:background-color}.list_item[_ngcontent-%COMP%]:hover{cursor:pointer}"]}),n})();var l=s(3075),k=s(520);let q=(()=>{class n{constructor(e){this.http=e}getCategories(){return this.http.get("https://mybucksmanager.000webhostapp.com/api/categories")}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(k.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var M=s(7322),R=s(7531),z=s(4107),G=s(508),j=s(7423),W=s(5899);function X(n,r){if(1&n&&(t.TgZ(0,"mat-option",14),t._UZ(1,"img",15),t.TgZ(2,"span",16),t._uU(3),t.qZA()()),2&n){const e=r.$implicit;t.Q6J("value",e.id),t.xp6(1),t.MGl("src","assets/categories/",e.name,".png",t.LSH),t.xp6(2),t.Oqu(e.name)}}function K(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",17),t.NdJ("click",function(){return t.CHM(e),t.oxw().add_trans()}),t.TgZ(1,"span"),t._uU(2,"Add"),t.qZA()()}if(2&n){const e=t.oxw();t.Q6J("disabled",e.isLoading)("disabled",!e.addTransactionForm.valid)}}function V(n,r){1&n&&t._UZ(0,"mat-progress-bar",20)}function tt(n,r){if(1&n&&(t.TgZ(0,"div",18),t.YNc(1,V,1,0,"mat-progress-bar",19),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.isLoading)}}const et=[{path:"",component:$},{path:"add",component:(()=>{class n{constructor(e,o,c,a,i,d){this.formBuilder=e,this.categoryService=o,this.transactionService=c,this.loginService=a,this.snackBar=i,this.router=d,this.userId=this.loginService.getSessionFromStorage(p.E),this.isLoading=!1,this.categories=[],this.pipe=new m.uU("en-US")}ngOnInit(){this.initForm(),this.catSub=this.categoryService.getCategories().subscribe(e=>{this.categories=e})}ngOnDestroy(){this.catSub.unsubscribe()}initForm(){this.amountCtrl=this.formBuilder.control("",l.kI.required),this.descriptionCtrl=this.formBuilder.control("",l.kI.required),this.categoryCtrl=this.formBuilder.control("",l.kI.required),this.addTransactionForm=this.formBuilder.group({amount:this.amountCtrl,description:this.descriptionCtrl,category:this.categoryCtrl})}add_trans(){this.isLoading=!0;const e=this.addTransactionForm.value.amount,o=this.addTransactionForm.value.description,c=this.addTransactionForm.value.category,a=this.pipe.transform(Date.now(),"yyyy-MM-dd HH:mm:ss");this.transactionService.addTransaction(this.userId,c,e,o,a.toString()).subscribe({next:i=>{this.snackBar.open(i.message,"dismiss",{duration:3e3}),this.isLoading=!1,this.router.navigateByUrl("home")},error:i=>{"404"==i.status?this.snackBar.open("Transaction not found","dismiss",{duration:3e3}):"502"==i.status?this.snackBar.open("Connection timed out, Try again later","dismiss",{duration:3e3}):(this.snackBar.open(i.message,"dismiss",{duration:3e3}),console.log("error =>"+i.message))}})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(l.qu),t.Y36(q),t.Y36(v.v),t.Y36(C.r),t.Y36(T.ux),t.Y36(y.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-add-transactions"]],decls:22,vars:8,consts:[[3,"title"],["fxLayout","column","fxLayoutAlign","center center",1,"container"],["fxLayout","column","fxLayoutAlign","center center"],["src","assets/add_transaction.png","alt","add_transaction",1,"img_title"],[1,"title"],["fxLayout","column","fxLayoutAlign","stretch",3,"formGroup"],["appearance","outline",3,"hideRequiredMarker"],["matInput","","maxlength","256","type","number","formControlName","amount",1,"amount"],["matInput","","maxlength","256","type","","formControlName","description"],["appearance","fill",3,"hideRequiredMarker"],["formControlName","category"],[3,"value",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"disabled","click",4,"ngIf"],["class","spinner","fxLayout","column","fxLayoutAlign","center center",4,"ngIf"],[3,"value"],["fxFlex","10","alt","",1,"category_icon",3,"src"],["fxFlex",""],["mat-raised-button","","color","primary",3,"disabled","click"],["fxLayout","column","fxLayoutAlign","center center",1,"spinner"],["mode","indeterminate",4,"ngIf"],["mode","indeterminate"]],template:function(e,o){1&e&&(t._UZ(0,"app-header",0),t.TgZ(1,"div",1)(2,"mat-card",2),t._UZ(3,"img",3),t.TgZ(4,"span",4),t._uU(5,"Add Transaction"),t.qZA(),t.TgZ(6,"form",5)(7,"mat-form-field",6)(8,"mat-label"),t._uU(9,"Amount"),t.qZA(),t._UZ(10,"input",7),t.qZA(),t.TgZ(11,"mat-form-field",6)(12,"mat-label"),t._uU(13,"Description"),t.qZA(),t._UZ(14,"input",8),t.qZA(),t.TgZ(15,"mat-form-field",9)(16,"mat-label"),t._uU(17,"Category"),t.qZA(),t.TgZ(18,"mat-select",10),t.YNc(19,X,4,3,"mat-option",11),t.qZA()(),t.YNc(20,K,3,2,"button",12),t.YNc(21,tt,2,1,"div",13),t.qZA()()()),2&e&&(t.Q6J("title","Add Transaction"),t.xp6(6),t.Q6J("formGroup",o.addTransactionForm),t.xp6(1),t.Q6J("hideRequiredMarker",!0),t.xp6(4),t.Q6J("hideRequiredMarker",!0),t.xp6(4),t.Q6J("hideRequiredMarker",!0),t.xp6(4),t.Q6J("ngForOf",o.categories),t.xp6(1),t.Q6J("ngIf",!o.isLoading),t.xp6(1),t.Q6J("ngIf",o.isLoading))},directives:[_.G,g.xw,g.Wh,A.a8,l._Y,l.JL,l.sg,M.KE,M.hX,R.Nt,l.wV,l.Fj,l.nD,l.JJ,l.u,z.gD,m.sg,G.ey,g.yH,m.O5,j.lW,W.pW],styles:[".container[_ngcontent-%COMP%]{min-height:90%}.category_icon[_ngcontent-%COMP%]{max-width:20%!important}.title[_ngcontent-%COMP%]{font-weight:500;font-size:1rem;margin-bottom:1rem}"]}),n})()}];let nt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[y.Bz.forChild(et)]]}),n})(),ot=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[m.ez,nt,Z.m]]}),n})()}}]);