"use strict";(self.webpackChunkMyMoney=self.webpackChunkMyMoney||[]).push([[841],{841:(Q,x,i)=>{i.r(x),i.d(x,{HomeModule:()=>R});var l=i(9808),C=i(4733),M=i(8330),p=i(8505),Z=i(7272),u=i(7503),A=i(9841),g=i(8966),t=i(5e3),y=i(8762),_=i(8480),T=i(1271),m=i(7093),O=i(7423);let D=(()=>{class e{constructor(n,o,a,c,r){this.dialogRef=n,this.data=o,this.loginService=a,this.transactionService=c,this.snackBar=r,this.userCurrency=this.loginService.getSessionFromStorage(u.t)}delete(n,o){this.transactionService.deleteTransaction(n,o).subscribe({next:a=>{this.snackBar.open(a,"dismiss",{duration:3e3}),console.log("data => "+a)},error:a=>{"404"==a.status?this.snackBar.open("Transaction not found","dismiss",{duration:3e3}):"502"==a.status?this.snackBar.open("Connection timed out, Try again later","dismiss",{duration:3e3}):(this.snackBar.open(a.message,"dismiss",{duration:3e3}),console.log("error =>"+a.message))}}),this.dialogRef.close(!0)}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(g.so),t.Y36(g.WI,8),t.Y36(y.r),t.Y36(_.v),t.Y36(T.ux))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-list-item-dialog"]],decls:21,vars:9,consts:[["mat-dialog-title","",1,"title"],["fxLayout","row","fxLayoutAlign"," center"],["fxFlex","10",1,"category",3,"src"],["fxFlex","50","fxLayoutAlign","center start",1,"name","font_weight_500"],["fxFlex","40","fxLayoutAlign","center end",1,"name","font_weight_500"],["mat-dialog-content",""],[1,"time"],[1,"time_title"],[1,"desc"],["mat-dialog-actions",""],["mat-button","","mat-dialog-close","","color","accent"],["mat-button","","mat-dialog-close","","color","warn",3,"click"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"img",2),t.TgZ(3,"span",3),t._uU(4),t.qZA(),t.TgZ(5,"span",4),t._uU(6),t.ALo(7,"number"),t.qZA()()(),t.TgZ(8,"div",5)(9,"div",6)(10,"span",7),t._uU(11,"Time: "),t.qZA(),t.TgZ(12,"span"),t._uU(13),t.qZA()(),t.TgZ(14,"div",8),t._uU(15),t.qZA()(),t.TgZ(16,"div",9)(17,"button",10),t._uU(18,"Close"),t.qZA(),t.TgZ(19,"button",11),t.NdJ("click",function(){return o.delete(o.data.id,o.data.userId)}),t._uU(20,"Delete"),t.qZA()()),2&n&&(t.xp6(2),t.MGl("src","assets/categories/",o.data.category,".png",t.LSH),t.xp6(2),t.Oqu(o.data.category),t.xp6(2),t.AsE("(",t.xi3(7,6,o.data.amount,"1.0-3")," ",o.userCurrency,")"),t.xp6(7),t.Oqu(o.data.time),t.xp6(2),t.hij(" ",o.data.description," "))},directives:[g.uh,m.xw,m.Wh,m.yH,g.xY,g.H8,O.lW,g.ZT],pipes:[l.JJ],styles:[".category[_ngcontent-%COMP%]{margin:.5rem}.title[_ngcontent-%COMP%]{font-size:1rem}.time_title[_ngcontent-%COMP%]{font-weight:500}"]}),e})();var v=i(3322),P=i(9224),w=i(5245),f=i(3379),L=i(4834),S=i(773);let H=(()=>{class e{transform(n){let o=new Date(n),a=new Date,c=new Date((new Date).setDate((new Date).getDate()-1)),r=new Date;r.setDate(a.getDate()-a.getDay());let d=r;return d.setDate(r.getDate()-7),o.setHours(0,0,0,0)==a.setHours(0,0,0,0)?"Today":o.setHours(0,0,0,0)==c.setHours(0,0,0,0)?"Yesterday":o>r&&o<c?"This week: ":o<r&&o>d?"Last week: ":"This month: "}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275pipe=t.Yjl({name:"elapsedTime",type:e,pure:!0}),e})(),F=(()=>{class e{transform(n){return n.length>15?n.slice(0,15)+" ...":n}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275pipe=t.Yjl({name:"description",type:e,pure:!0}),e})();function U(e,s){1&e&&(t.TgZ(0,"mat-icon",18),t._uU(1,"arrow_upward"),t.qZA())}function I(e,s){1&e&&(t.TgZ(0,"mat-icon",19),t._uU(1,"arrow_downward"),t.qZA())}const b=function(e){return{color:e}};function E(e,s){if(1&e&&(t.TgZ(0,"div",9)(1,"mat-card",10)(2,"p",11),t._uU(3,"Spent this month "),t.YNc(4,U,2,0,"mat-icon",12),t.YNc(5,I,2,0,"mat-icon",13),t.TgZ(6,"span",14),t._uU(7),t.qZA()(),t.TgZ(8,"p",15)(9,"span"),t._uU(10),t.ALo(11,"number"),t.qZA(),t.TgZ(12,"span",16),t._UZ(13,"img",17),t.qZA()()()()),2&e){const n=t.oxw();t.xp6(4),t.Q6J("ngIf",n.expense_difference>0),t.xp6(1),t.Q6J("ngIf",n.expense_difference<0),t.xp6(1),t.Q6J("ngStyle",t.VKq(8,b,n.expense_difference>0?"red":"green")),t.xp6(1),t.hij("",n.expense_difference," %"),t.xp6(3),t.hij("",t.xi3(11,5,n.current_expense,"1.0-3")," ")}}function Y(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"mat-list-item",26),t.NdJ("click",function(){const c=t.CHM(n).$implicit;return t.oxw(3).showDetails(c.id,c.category,c.description,c.amount,c.time)}),t._UZ(1,"img",27),t.TgZ(2,"div",28)(3,"span",29),t._uU(4),t.qZA(),t.TgZ(5,"span",30),t._uU(6),t.ALo(7,"description"),t.qZA()(),t.TgZ(8,"div",31)(9,"span",32),t._uU(10),t.ALo(11,"number"),t.qZA(),t.TgZ(12,"span",33),t._uU(13),t.qZA()()()}if(2&e){const n=s.$implicit,o=t.oxw(3);t.xp6(1),t.MGl("src","assets/categories/",n.category,".png",t.LSH),t.xp6(3),t.Oqu(n.category),t.xp6(2),t.Oqu(t.lcZ(7,6,n.description)),t.xp6(4),t.AsE("",t.xi3(11,8,n.amount,"1.0-3")," ",o.userCurrency,""),t.xp6(3),t.Oqu(n.time)}}function J(e,s){if(1&e&&(t.TgZ(0,"mat-list")(1,"div",22)(2,"span",23),t._uU(3),t.ALo(4,"elapsedTime"),t.ALo(5,"date"),t.qZA(),t.TgZ(6,"span",24),t._uU(7),t.ALo(8,"number"),t.qZA()(),t._UZ(9,"mat-divider"),t.YNc(10,Y,14,11,"mat-list-item",25),t.qZA()),2&e){const n=s.$implicit,o=t.oxw(2);t.xp6(3),t.AsE("",t.lcZ(4,5,n.date)," ",t.xi3(5,7,n.date,"mediumDate"),""),t.xp6(4),t.AsE("",t.xi3(8,10,n.total,"1.0-3")," ",o.userCurrency,""),t.xp6(3),t.Q6J("ngForOf",n.transactions)}}function k(e,s){if(1&e&&(t.TgZ(0,"div",20),t.YNc(1,J,11,13,"mat-list",21),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngForOf",n.dailyHistory)}}function $(e,s){1&e&&(t.TgZ(0,"div",34),t._UZ(1,"mat-spinner",35),t.qZA()),2&e&&(t.xp6(1),t.Q6J("diameter",40))}const N=[{path:"",component:(()=>{class e{constructor(n,o,a){this.transactionsService=n,this.loginService=o,this.dialog=a,this.month=((new Date).getMonth()+1).toString().length>1?((new Date).getMonth()+1).toString():"0"+((new Date).getMonth()+1).toString(),this.Lastmonth=(Number(this.month)-1).toString(),this.year=(new Date).getFullYear().toString(),this.date=this.month.toString().slice(-2)+"-"+(new Date).getFullYear().toString(),this.userId=this.loginService.getSessionFromStorage(u.E),this.userCurrency=this.loginService.getSessionFromStorage(u.t),this.transaction_monthly_data=[],this.currentExpense$=this.transactionsService.getCurrentMonthExpenseTotal(this.userId,this.year,this.month),this.lastExpense$=this.transactionsService.getCurrentMonthExpenseTotal(this.userId,this.year,this.Lastmonth),this.dailyHistory$=this.transactionsService.getDailyTransaction(this.userId,this.year,this.month),this.current_expense=0,this.last_expense=0,this.expense_difference=0,this.selectedItemIndex=0,this.isLoading=!1,this.datas=[{date:"date1",total:999.999,transactions:[{id:1,category:"drinks",name:"Photos",description:"azertyuiopppppp............................................................",amount:250,time:new Date("1/1/16").toString()},{id:2,category:"toiletterie",name:"Recipes",description:"desc...",amount:250,time:new Date("1/17/16").toString()},{id:3,category:"transportation",name:"Work",description:"desc...",amount:"250.00",time:new Date("1/28/16").toString()}]},{date:"date2",total:555.555,transactions:[{id:4,category:"household",name:"Photos",description:"desc...",amount:250,time:new Date("1/1/16").toString()},{id:1,category:"cafe",name:"Recipes",description:"desc...",amount:250,time:new Date("1/17/16").toString()},{id:1,category:"grocery",name:"Work",description:"desc...",amount:250,time:new Date("1/28/16").toString()}]},{date:"date3",total:777.777,transactions:[{id:4,category:"household",name:"Photos",description:"desc...",amount:250,time:new Date("1/1/16").toString()},{id:1,category:"cafe",name:"Recipes",description:"desc...",amount:250,time:new Date("1/17/16").toString()},{id:1,category:"grocery",name:"Work",description:"desc...",amount:250,time:new Date("1/28/16").toString()}]}],this.dailyHistory=[]}ngOnInit(){this.getMonthlyExpensesData()}showDetails(n,o,a,c,r){this.dialog.open(D,{data:{id:n,userId:this.userId,category:o,description:a,amount:c,time:r}}).afterClosed().subscribe(h=>{h&&this.getMonthlyExpensesData()})}getExpencesDifference(n,o){return 0==n?o:o/n*100-100}getMonthlyExpensesData(){this.isLoading=!0;const n=this.currentExpense$.pipe((0,p.b)(r=>{console.log("current: "+r),this.current_expense=r})),o=this.lastExpense$.pipe((0,p.b)(r=>{console.log("last:"+r),this.last_expense=r})),a=(0,A.a)([n,o]).pipe((0,p.b)(([r,d])=>{const h=this.getExpencesDifference(d,r);this.expense_difference=Math.trunc(h)})),c=this.dailyHistory$.pipe((0,p.b)(r=>{this.dailyHistory=r}));(0,Z.z)(n,o,a,c).subscribe({complete:()=>{this.isLoading=!1}})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(_.v),t.Y36(y.r),t.Y36(g.uw))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-home"]],decls:12,vars:3,consts:[["fxLayout","column","fxLayout.lg","row","fxShow","","fxHide.xs","",1,"desktop"],["fxFlex","70%"],[1,"total_expense","height_50"],[1,"yearly_statestic","height_50"],["fxFlex","30%",1,"daily_statestic"],[1,"mobile"],["class","expense",4,"ngIf"],["class","history",4,"ngIf"],["class","spinner","fxLayoutAlign","center center",4,"ngIf"],[1,"expense"],["fxLayout","column","fxLayoutAlign","center center"],[1,"expense_title"],["style","color:red",4,"ngIf"],["style","color:green",4,"ngIf"],[3,"ngStyle"],["fxLayout","row","fxLayoutAlign","center center",1,"expense_value"],[1,"expense_flag"],["src","assets/flags/TND.png"],[2,"color","red"],[2,"color","green"],[1,"history"],[4,"ngFor","ngForOf"],["mat-subheader",""],["fxFlex","50","fxLayoutAlign","start",1,"date"],["fxFlex","50","fxLayoutAlign","end",1,"daily_total"],["class","list_item",3,"click",4,"ngFor","ngForOf"],[1,"list_item",3,"click"],["fxFlex","10",1,"category",3,"src"],["fxLayout","column","fxFlex","45","fxLayoutAlign","center start",1,"description"],[1,"name","font_weight_500"],[1,"desc","color_A9A9A9"],["fxLayout","column","fxFlex","45","fxLayoutAlign","center end",1,"value"],[1,"amount","font_weight_500"],[1,"hour","color_A9A9A9"],["fxLayoutAlign","center center",1,"spinner"],[3,"diameter"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3," . "),t.qZA(),t.TgZ(4,"div",3),t._uU(5," . "),t.qZA()(),t.TgZ(6,"div",4),t._uU(7," . "),t.qZA()(),t.TgZ(8,"div",5),t.YNc(9,E,14,10,"div",6),t.YNc(10,k,2,1,"div",7),t.YNc(11,$,2,1,"div",8),t.qZA()),2&n&&(t.xp6(9),t.Q6J("ngIf",!o.isLoading),t.xp6(1),t.Q6J("ngIf",!o.isLoading),t.xp6(1),t.Q6J("ngIf",o.isLoading))},directives:[m.xw,v.b8,m.yH,l.O5,P.a8,m.Wh,w.Hw,l.PC,v.Zl,l.sg,f.i$,f.gs,L.d,f.Tg,S.Ou],pipes:[l.JJ,H,l.uU,F],styles:[".desktop[_ngcontent-%COMP%]{height:100%}.desktop[_ngcontent-%COMP%]   .total_expense[_ngcontent-%COMP%]{background-color:red}.desktop[_ngcontent-%COMP%]   .yearly_statestic[_ngcontent-%COMP%]{background-color:#00f}.desktop[_ngcontent-%COMP%]   .daily_statestic[_ngcontent-%COMP%]{background-color:green}.mobile[_ngcontent-%COMP%]{min-width:300px;padding-bottom:5rem}.mobile[_ngcontent-%COMP%]   .expense[_ngcontent-%COMP%]{margin:1rem;min-width:20rem}.mobile[_ngcontent-%COMP%]   .expense[_ngcontent-%COMP%]   .expense_title[_ngcontent-%COMP%]{font-size:1rem}.mobile[_ngcontent-%COMP%]   .expense[_ngcontent-%COMP%]   .expense_title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{height:1rem;width:1rem;font-size:1rem}.mobile[_ngcontent-%COMP%]   .expense[_ngcontent-%COMP%]   .expense_value[_ngcontent-%COMP%]{font-weight:500;font-size:3rem}.mobile[_ngcontent-%COMP%]   .expense[_ngcontent-%COMP%]   .expense_flag[_ngcontent-%COMP%]{margin-left:1rem}.mobile[_ngcontent-%COMP%]   .history[_ngcontent-%COMP%]   .category[_ngcontent-%COMP%]{margin:.5rem}.mobile[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{margin:0;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.height_50[_ngcontent-%COMP%]{height:50%}.font_weight_500[_ngcontent-%COMP%]{font-weight:500}.color_A9A9A9[_ngcontent-%COMP%]{color:#a9a9a9}.mat-subheader[_ngcontent-%COMP%]{padding:0 1rem}mat-list-item[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}.list_item[_ngcontent-%COMP%]:active{background-color:#f2f2f2;transition:background-color}.list_item[_ngcontent-%COMP%]:hover{cursor:pointer}"]}),e})()}];let q=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[M.Bz.forChild(N)]]}),e})(),R=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[l.ez,q,C.m]]}),e})()}}]);